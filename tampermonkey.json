{
    "created_by": "Tampermonkey",
    "version": "1",
    "scripts":
    [
        {
            "name": "YouTube: Hide Watched Videos",
            "options":
            {
                "check_for_updates": true,
                "user_modified": null,
                "comment": null,
                "compatopts_for_requires": true,
                "compat_wrappedjsobject": false,
                "compat_metadata": false,
                "compat_foreach": false,
                "compat_powerful_this": null,
                "sandbox": null,
                "noframes": null,
                "unwrap": null,
                "run_at": null,
                "tab_types": null,
                "override":
                {
                    "use_includes":
                    [],
                    "orig_includes":
                    [],
                    "merge_includes": true,
                    "use_matches":
                    [],
                    "orig_matches":
                    [
                        "http://*.youtube.com/*",
                        "http://youtube.com/*",
                        "https://*.youtube.com/*",
                        "https://youtube.com/*"
                    ],
                    "merge_matches": true,
                    "use_excludes":
                    [],
                    "orig_excludes":
                    [],
                    "merge_excludes": true,
                    "use_connects":
                    [],
                    "orig_connects":
                    [],
                    "merge_connects": true,
                    "use_blockers":
                    [],
                    "orig_run_at": "document-idle",
                    "orig_noframes": true
                }
            },
            "storage":
            {
                "ts": 1717332398540,
                "data":
                {}
            },
            "enabled": true,
            "position": 1,
            "file_url": "https://update.greasyfork.org/scripts/13040/YouTube%3A%20Hide%20Watched%20Videos.user.js",
            "uuid": "f83161f4-fa69-45a5-a6f6-8396c33d456b",
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBZb3VUdWJlOiBIaWRlIFdhdGNoZWQgVmlkZW9zCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly93d3cuaGF1cy5nZy8KLy8gQHZlcnNpb24gICAgICA2LjMKLy8gQGxpY2Vuc2UgICAgICBNSVQKLy8gQGRlc2NyaXB0aW9uICBIaWRlcyB3YXRjaGVkIHZpZGVvcyAoYW5kIHNob3J0cykgZnJvbSB5b3VyIFlvdVR1YmUgc3Vic2NyaXB0aW9ucyBwYWdlLgovLyBAYXV0aG9yICAgICAgIEV2IEhhdXMKLy8gQGF1dGhvciAgICAgICBuZXRqZWZmCi8vIEBhdXRob3IgICAgICAgYWN0aW9ubGVzcwovLyBAbWF0Y2ggICAgICAgIGh0dHA6Ly8qLnlvdXR1YmUuY29tLyoKLy8gQG1hdGNoICAgICAgICBodHRwOi8veW91dHViZS5jb20vKgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vKi55b3V0dWJlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly95b3V0dWJlLmNvbS8qCi8vIEBub2ZyYW1lcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vb3BlbnVzZXJqcy5vcmcvc3JjL2xpYnMvc2l6emxlL0dNX2NvbmZpZy5qcwovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fc2V0VmFsdWUKLy8gQGRvd25sb2FkVVJMIGh0dHBzOi8vdXBkYXRlLmdyZWFzeWZvcmsub3JnL3NjcmlwdHMvMTMwNDAvWW91VHViZSUzQSUyMEhpZGUlMjBXYXRjaGVkJTIwVmlkZW9zLnVzZXIuanMKLy8gQHVwZGF0ZVVSTCBodHRwczovL3VwZGF0ZS5ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzEzMDQwL1lvdVR1YmUlM0ElMjBIaWRlJTIwV2F0Y2hlZCUyMFZpZGVvcy5tZXRhLmpzCi8vID09L1VzZXJTY3JpcHQ9PQoKLy8gVG8gc3VibWl0IGJ1Z3Mgb3Igc3VibWl0IHJldmlzaW9ucyBwbGVhc2Ugc2VlIHZpc2l0IHRoZSByZXBvc2l0b3J5IGF0OgovLyBodHRwczovL2dpdGh1Yi5jb20vRXZIYXVzL3lvdXR1YmUtaGlkZS13YXRjaGVkCi8vIFlvdSBjYW4gb3BlbiBuZXcgaXNzdWVzIGF0OgovLyBodHRwczovL2dpdGh1Yi5jb20vRXZIYXVzL3lvdXR1YmUtaGlkZS13YXRjaGVkL2lzc3VlcwoKKGZ1bmN0aW9uIChfdW5kZWZpbmVkKSB7CgkvLyBFbmFibGUgZm9yIGRlYnVnZ2luZwoJY29uc3QgREVCVUcgPSBmYWxzZTsKCgkvLyBHTV9jb25maWcgc2V0dXAKCWNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwoJdGl0bGUudGV4dENvbnRlbnQgPSAnWW91VHViZTogSGlkZSBXYXRjaGVkIFZpZGVvcyBTZXR0aW5ncyc7Cgl0aXRsZS5ocmVmID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9FdkhhdXMveW91dHViZS1oaWRlLXdhdGNoZWQnOwoJdGl0bGUudGFyZ2V0ID0gJ19ibGFuayc7Cgljb25zdCBnbWMgPSBuZXcgR01fY29uZmlnKHsKCQlldmVudHM6IHsKCQkJc2F2ZSAoKSB7CgkJCQl0aGlzLmNsb3NlKCk7CgkJCX0sCgkJfSwKCQlmaWVsZHM6IHsKCQkJSElEREVOX1RIUkVTSE9MRF9QRVJDRU5UOiB7CgkJCQlkZWZhdWx0OiAxMCwKCQkJCWxhYmVsOiAnSGlkZS9EaW0gVmlkZW9zIEFib3ZlIFBlcmNlbnQnLAoJCQkJbWF4OiAxMDAsCgkJCQltaW46IDAsCgkJCQl0eXBlOiAnaW50JywKCQkJfSwKCQl9LAoJCWlkOiAnWW91VHViZUhpZGVXYXRjaGVkVmlkZW9zJywKCQl0aXRsZSwKCX0pOwoKCS8vIFNldCBkZWZhdWx0cwoJbG9jYWxTdG9yYWdlLllUSFdWX1dBVENIRUQgPSBsb2NhbFN0b3JhZ2UuWVRIV1ZfV0FUQ0hFRCB8fCAnZmFsc2UnOwoKCWNvbnN0IGxvZ0RlYnVnID0gKC4uLm1zZ3MpID0+IHsKCQkvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQoJCWlmIChERUJVRykgY29uc29sZS5sb2coJ1tZVC1IV1ZdJywgbXNncyk7Cgl9OwoKCS8vIEdyZWFzZU1vbmtleSBubyBsb25nZXIgc3VwcG9ydHMgR01fYWRkU3R5bGUuIFNvIHdlIGhhdmUgdG8gZGVmaW5lCgkvLyBvdXIgb3duIHBvbHlmaWxsIGhlcmUKCWNvbnN0IGFkZFN0eWxlID0gZnVuY3Rpb24gKGFDc3MpIHsKCQljb25zdCBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsKCQlpZiAoaGVhZCkgewoJCQljb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CgkJCXN0eWxlLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpOwoJCQlzdHlsZS50ZXh0Q29udGVudCA9IGFDc3M7CgkJCWhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwoJCQlyZXR1cm4gc3R5bGU7CgkJfQoJCXJldHVybiBudWxsOwoJfTsKCglhZGRTdHlsZShgCi5ZVC1IV1YtV0FUQ0hFRC1ISURERU4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQgfQoKLllULUhXVi1XQVRDSEVELURJTU1FRCB7IG9wYWNpdHk6IDAuMyB9CgouWVQtSFdWLVNIT1JUUy1ISURERU4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQgfQoKLllULUhXVi1TSE9SVFMtRElNTUVEIHsgb3BhY2l0eTogMC4zIH0KCi5ZVC1IV1YtSElEREVOLVJPVy1QQVJFTlQgeyBwYWRkaW5nLWJvdHRvbTogMTBweCB9CgouWVQtSFdWLUJVVFRPTlMgewoJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7Cglib3JkZXI6IDFweCBzb2xpZCB2YXIoLS15dGQtc2VhcmNoYm94LWxlZ2FjeS1ib3JkZXItY29sb3IpOwogICAgYm9yZGVyLXJhZGl1czogNDBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBnYXA6IDVweDsKCW1hcmdpbjogMCAyMHB4Owp9CgouWVQtSFdWLUJVVFRPTiB7CglhbGlnbi1pdGVtczogY2VudGVyOwoJYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7Cglib3JkZXI6IDA7CiAgICBib3JkZXItcmFkaXVzOiA0MHB4OwoJY29sb3I6IHZhcigtLXl0LXNwZWMtaWNvbi1pbmFjdGl2ZSk7CgljdXJzb3I6IHBvaW50ZXI7CiAgICBkaXNwbGF5OiBmbGV4OwoJaGVpZ2h0OiA0MHB4OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CglvdXRsaW5lOiAwOwoJd2lkdGg6IDQwcHg7Cn0KCi5ZVC1IV1YtQlVUVE9OOmZvY3VzLAouWVQtSFdWLUJVVFRPTjpob3ZlciB7CgliYWNrZ3JvdW5kOiB2YXIoLS15dC1zcGVjLWJhZGdlLWNoaXAtYmFja2dyb3VuZCk7Cn0KCi5ZVC1IV1YtQlVUVE9OLURJU0FCTEVEIHsgY29sb3I6IHZhcigtLXl0LXNwZWMtaWNvbi1kaXNhYmxlZCkgfQoKLllULUhXVi1NRU5VIHsKCWJhY2tncm91bmQ6ICNGOEY4Rjg7Cglib3JkZXI6IDFweCBzb2xpZCAjRDNEM0QzOwoJYm94LXNoYWRvdzogMCAxcHggMCByZ2JhKDAsIDAsIDAsIDAuMDUpOwoJZGlzcGxheTogbm9uZTsKCWZvbnQtc2l6ZTogMTJweDsKCW1hcmdpbi10b3A6IC0xcHg7CglwYWRkaW5nOiAxMHB4OwoJcG9zaXRpb246IGFic29sdXRlOwoJcmlnaHQ6IDA7Cgl0ZXh0LWFsaWduOiBjZW50ZXI7Cgl0b3A6IDEwMCU7Cgl3aGl0ZS1zcGFjZTogbm9ybWFsOwoJei1pbmRleDogOTk5OTsKfQoKLllULUhXVi1NRU5VLU9OIHsgZGlzcGxheTogYmxvY2s7IH0KLllULUhXVi1NRU5VQlVUVE9OLU9OIHNwYW4geyB0cmFuc2Zvcm06IHJvdGF0ZSgxODBkZWcpIH0KYCk7CgoJY29uc3QgQlVUVE9OUyA9IFt7CgkJLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqLwoJCWljb246ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgNDggNDgiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTI0IDlDMTQgOSA1LjQ2IDE1LjIyIDIgMjRjMy40NiA4Ljc4IDEyIDE1IDIyIDE1IDEwLjAxIDAgMTguNTQtNi4yMiAyMi0xNS0zLjQ2LTguNzgtMTEuOTktMTUtMjItMTV6bTAgMjVjLTUuNTIgMC0xMC00LjQ4LTEwLTEwczQuNDgtMTAgMTAtMTAgMTAgNC40OCAxMCAxMC00LjQ4IDEwLTEwIDEwem0wLTE2Yy0zLjMxIDAtNiAyLjY5LTYgNnMyLjY5IDYgNiA2IDYtMi42OSA2LTYtMi42OS02LTYtNnoiLz48L3N2Zz4nLAoJCWljb25IaWRkZW46ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgNDggNDgiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTI0IDE0YzUuNTIgMCAxMCA0LjQ4IDEwIDEwIDAgMS4yOS0uMjYgMi41Mi0uNzEgMy42NWw1Ljg1IDUuODVjMy4wMi0yLjUyIDUuNC01Ljc4IDYuODctOS41LTMuNDctOC43OC0xMi0xNS0yMi4wMS0xNS0yLjggMC01LjQ4LjUtNy45NyAxLjRsNC4zMiA0LjMxYzEuMTMtLjQ0IDIuMzYtLjcxIDMuNjUtLjcxek00IDguNTVsNC41NiA0LjU2LjkxLjkxQzYuMTcgMTYuNiAzLjU2IDIwLjAzIDIgMjRjMy40NiA4Ljc4IDEyIDE1IDIyIDE1IDMuMSAwIDYuMDYtLjYgOC43Ny0xLjY5bC44NS44NUwzOS40NSA0NCA0MiA0MS40NiA2LjU1IDYgNCA4LjU1ek0xNS4wNiAxOS42bDMuMDkgMy4wOWMtLjA5LjQzLS4xNS44Ni0uMTUgMS4zMSAwIDMuMzEgMi42OSA2IDYgNiAuNDUgMCAuODgtLjA2IDEuMy0uMTVsMy4wOSAzLjA5QzI3LjA2IDMzLjYgMjUuNTggMzQgMjQgMzRjLTUuNTIgMC0xMC00LjQ4LTEwLTEwIDAtMS41OC40LTMuMDYgMS4wNi00LjR6bTguNjEtMS41NyA2LjMgNi4zTDMwIDI0YzAtMy4zMS0yLjY5LTYtNi02bC0uMzMuMDN6Ii8+PC9zdmc+JywKCQkvKiBlc2xpbnQtZW5hYmxlIG1heC1sZW4gKi8KCQluYW1lOiAnVG9nZ2xlIFdhdGNoZWQgVmlkZW9zJywKCQlzdGF0ZUtleTogJ1lUSFdWX1NUQVRFJywKCQl0eXBlOiAndG9nZ2xlJywKCX0sIHsKCQkvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovCgkJaWNvbjogJzxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMzEuOTUgM2MtMS4xMSAwLTIuMjUuMy0zLjI3LjkzbC0xNS45MyA5LjQ1QzEwLjMyIDE0Ljc5IDguODggMTcuNjcgOSAyMC43Yy4xNSAzIDEuNzQgNS42MSA0LjE3IDYuODQuMDYuMDMgMi4yNSAxLjA1IDIuMjUgMS4wNWwtMi43IDEuNTljLTMuNDIgMi4wNC00Ljc0IDYuODEtMi45NCAxMC42NUMxMS4wNyA0My40NyAxMy41IDQ1IDE2LjA1IDQ1YzEuMTEgMCAyLjIyLS4zIDMuMjctLjkzbDE1LjkzLTkuNDVjMi40LTEuNDQgMy44Ny00LjI5IDMuNzItNy4zNS0uMTItMi45Ny0xLjc0LTUuNjEtNC4xNy02LjgxLS4wNi0uMDMtMi4yNS0xLjA1LTIuMjUtMS4wNWwyLjctMS41OWMzLjQyLTIuMDQgNC43NC02LjgxIDIuOTEtMTAuNjVDMzYuOTMgNC41MyAzNC40NyAzIDMxLjk1IDN6Ii8+PC9zdmc+JywKCQlpY29uSGlkZGVuOiAnPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDQ4IDQ4Ij48ZyBmaWxsPSJjdXJyZW50Q29sb3IiPjxnIGNsaXAtcGF0aD0idXJsKCNzbGFzaEdhcCkiPjxwYXRoIGQ9Ik0zMS45NyAzYy0xLjExIDAtMi4yNS4zLTMuMjcuOTNsLTE1LjkzIDkuNDVjLTIuNDMgMS40MS0zLjg3IDQuMjktMy43NSA3LjMyLjE1IDMgMS43NCA1LjYxIDQuMTcgNi44NC4wNi4wMyAyLjI1IDEuMDUgMi4yNSAxLjA1bC0yLjcgMS41OUM5LjMyIDMyLjIyIDggMzYuOTkgOS44IDQwLjgzYzEuMjkgMi42NCAzLjcyIDQuMTcgNi4yNyA0LjE3IDEuMTEgMCAyLjIyLS4zIDMuMjctLjkzbDE1LjkzLTkuNDVjMi40LTEuNDQgMy44Ny00LjI5IDMuNzItNy4zNS0uMTItMi45Ny0xLjc0LTUuNjEtNC4xNy02LjgxLS4wNi0uMDMtMi4yNS0xLjA1LTIuMjUtMS4wNWwyLjctMS41OWMzLjQyLTIuMDQgNC43NC02LjgxIDIuOTEtMTAuNjVDMzYuOTUgNC41MyAzNC40OSAzIDMxLjk3IDN6Ii8+PC9nPjxwYXRoIGQ9Im03LjUwMSA1LjU1IDQuMDY2LTIuNDIgMjQuMjYgNDAuNzgtNC4wNjUgMi40MTh6Ii8+PC9nPjwvc3ZnPicsCgkJLyogZXNsaW50LWVuYWJsZSBtYXgtbGVuICovCgkJbmFtZTogJ1RvZ2dsZSBTaG9ydHMnLAoJCXN0YXRlS2V5OiAnWVRIV1ZfU1RBVEVfU0hPUlRTJywKCQl0eXBlOiAndG9nZ2xlJywKCX0sIHsKCQkvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovCgkJaWNvbjogJzxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTEyIDkuNWEyLjUgMi41IDAgMCAxIDAgNSAyLjUgMi41IDAgMCAxIDAtNW0wLTFjLTEuOTMgMC0zLjUgMS41Ny0zLjUgMy41czEuNTcgMy41IDMuNSAzLjUgMy41LTEuNTcgMy41LTMuNS0xLjU3LTMuNS0zLjUtMy41ek0xMy4yMiAzbC41NSAyLjIuMTMuNTEuNS4xOGMuNjEuMjMgMS4xOS41NiAxLjcyLjk4bC40LjMyLjUtLjE0IDIuMTctLjYyIDEuMjIgMi4xMS0xLjYzIDEuNTktLjM3LjM2LjA4LjUxYy4wNS4zMi4wOC42NC4wOC45OHMtLjAzLjY2LS4wOC45OGwtLjA4LjUxLjM3LjM2IDEuNjMgMS41OS0xLjIyIDIuMTEtMi4xNy0uNjItLjUtLjE0LS40LjMyYy0uNTMuNDMtMS4xMS43Ni0xLjcyLjk4bC0uNS4xOC0uMTMuNTEtLjU1IDIuMjRoLTIuNDRsLS41NS0yLjItLjEzLS41MS0uNS0uMThjLS42LS4yMy0xLjE4LS41Ni0xLjcyLS45OWwtLjQtLjMyLS41LjE0LTIuMTcuNjItMS4yMS0yLjEyIDEuNjMtMS41OS4zNy0uMzYtLjA4LS41MWMtLjA1LS4zMi0uMDgtLjY1LS4wOC0uOThzLjAzLS42Ni4wOC0uOThsLjA4LS41MS0uMzctLjM2TDMuNiA4LjU2bDEuMjItMi4xMSAyLjE3LjYyLjUuMTQuNC0uMzJjLjUzLS40NCAxLjExLS43NyAxLjcyLS45OWwuNS0uMTguMTMtLjUxLjU0LTIuMjFoMi40NE0xNCAyaC00bC0uNzQgMi45NmMtLjczLjI3LTEuNC42Ni0yIDEuMTRsLTIuOTItLjgzLTIgMy40NiAyLjE5IDIuMTNjLS4wNi4zNy0uMDkuNzUtLjA5IDEuMTRzLjAzLjc3LjA5IDEuMTRsLTIuMTkgMi4xMyAyIDMuNDYgMi45Mi0uODNjLjYuNDggMS4yNy44NyAyIDEuMTRMMTAgMjJoNGwuNzQtMi45NmMuNzMtLjI3IDEuNC0uNjYgMi0xLjE0bDIuOTIuODMgMi0zLjQ2LTIuMTktMi4xM2MuMDYtLjM3LjA5LS43NS4wOS0xLjE0cy0uMDMtLjc3LS4wOS0xLjE0bDIuMTktMi4xMy0yLTMuNDYtMi45Mi44M2MtLjYtLjQ4LTEuMjctLjg3LTItMS4xNEwxNCAyeiIvPjwvc3ZnPicsCgkJLyogZXNsaW50LWVuYWJsZSBtYXgtbGVuICovCgkJbmFtZTogJ1NldHRpbmdzJywKCQl0eXBlOiAnc2V0dGluZ3MnLAoJfV07CgoJLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgljb25zdCBkZWJvdW5jZSA9IGZ1bmN0aW9uIChmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHsKCQlsZXQgdGltZW91dDsKCQlyZXR1cm4gKC4uLmFyZ3MpID0+IHsKCQkJY29uc3QgbGF0ZXIgPSAoKSA9PiB7CgkJCQl0aW1lb3V0ID0gbnVsbDsKCQkJCWlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpOwoJCQl9OwoJCQljb25zdCBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0OwoJCQljbGVhclRpbWVvdXQodGltZW91dCk7CgkJCXRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTsKCQkJaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7CgkJfTsKCX07CgoJLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgljb25zdCBmaW5kV2F0Y2hlZEVsZW1lbnRzID0gZnVuY3Rpb24gKCkgewoJCWNvbnN0IHdhdGNoZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcueXRkLXRodW1ibmFpbC1vdmVybGF5LXJlc3VtZS1wbGF5YmFjay1yZW5kZXJlcicpOwoKCQljb25zdCB3aXRoVGhyZXNob2xkID0gQXJyYXkuZnJvbSh3YXRjaGVkKS5maWx0ZXIoKGJhcikgPT4gewoJCQlyZXR1cm4gYmFyLnN0eWxlLndpZHRoICYmIHBhcnNlSW50KGJhci5zdHlsZS53aWR0aCwgMTApID49IGdtYy5nZXQoJ0hJRERFTl9USFJFU0hPTERfUEVSQ0VOVCcpOwoJCX0pOwoKCQlsb2dEZWJ1ZygKCQkJYEZvdW5kICR7d2F0Y2hlZC5sZW5ndGh9IHdhdGNoZWQgZWxlbWVudHMgYCArCgkJCWAoJHt3aXRoVGhyZXNob2xkLmxlbmd0aH0gd2l0aGluIHRocmVzaG9sZClgCgkJKTsKCgkJcmV0dXJuIHdpdGhUaHJlc2hvbGQ7Cgl9OwoKCS8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgoJY29uc3QgZmluZFNob3J0c0NvbnRhaW5lcnMgPSBmdW5jdGlvbiAoKSB7CgkJY29uc3Qgc2hvcnRzQ29udGFpbmVycyA9IFsKCQkJLy8gU3Vic2NyaXB0aW9ucyBQYWdlIChMaXN0IFZpZXcpCgkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3l0ZC1yZWVsLXNoZWxmLXJlbmRlcmVyIHl0ZC1yZWVsLWl0ZW0tcmVuZGVyZXInKSwKCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgneXRkLXJpY2gtc2hlbGYtcmVuZGVyZXIgeXRkLXJpY2gtZ3JpZC1zbGltLW1lZGlhJyksCgkJCS8vIEhvbWUgUGFnZSAmIFN1YnNjcmlwdGlvbnMgUGFnZSAoR3JpZCBWaWV3KQoJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd5dGQtcmVlbC1zaGVsZi1yZW5kZXJlciB5dGQtdGh1bWJuYWlsJyksCgkJCS8vIFNlYXJjaCByZXN1bHRzIHBhZ2UKCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgneXRkLXJlZWwtc2hlbGYtcmVuZGVyZXIgLnl0ZC1yZWVsLXNoZWxmLXJlbmRlcmVyJyksCgkJXS5yZWR1Y2UoKGFjYywgbWF0Y2hlcykgPT4gewoJCQltYXRjaGVzPy5mb3JFYWNoKChjaGlsZCkgPT4gewoJCQkJY29uc3QgY29udGFpbmVyID0gY2hpbGQuY2xvc2VzdCgneXRkLXJlZWwtc2hlbGYtcmVuZGVyZXInKSB8fCBjaGlsZC5jbG9zZXN0KCd5dGQtcmljaC1zaGVsZi1yZW5kZXJlcicpOwoJCQkJaWYgKGNvbnRhaW5lciAmJiAhYWNjLmluY2x1ZGVzKGNvbnRhaW5lcikpIGFjYy5wdXNoKGNvbnRhaW5lcik7CgkJCX0pOwoJCQlyZXR1cm4gYWNjOwoJCX0sIFtdKTsKCgkJLy8gU2VhcmNoIHJlc3VsdHMgc29tZXRpbWVzIGFsc28gc2hvdyBTaG9ydHMgYXMgaWYgdGhleSdyZSByZWd1bGFyIHZpZGVvcyB3aXRoIGEgbGl0dGxlICJTaG9ydHMiIGJhZGdlCgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnl0ZC10aHVtYm5haWwtb3ZlcmxheS10aW1lLXN0YXR1cy1yZW5kZXJlclthcmlhLWxhYmVsPSJTaG9ydHMiXScpLmZvckVhY2goKGNoaWxkKSA9PiB7CgkJCWNvbnN0IGNvbnRhaW5lciA9IGNoaWxkLmNsb3Nlc3QoJ3l0ZC12aWRlby1yZW5kZXJlcicpOwoJCQlzaG9ydHNDb250YWluZXJzLnB1c2goY29udGFpbmVyKTsKCQl9KTsKCgkJbG9nRGVidWcoYEZvdW5kICR7c2hvcnRzQ29udGFpbmVycy5sZW5ndGh9IHNob3J0cyBjb250YWluZXIgZWxlbWVudHNgKTsKCgkJcmV0dXJuIHNob3J0c0NvbnRhaW5lcnM7Cgl9OwoKCS8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgoJY29uc3QgZmluZEJ1dHRvbkFyZWFUYXJnZXQgPSBmdW5jdGlvbiAoKSB7CgkJLy8gQnV0dG9uIHdpbGwgYmUgaW5qZWN0ZWQgaW50byB0aGUgbWFpbiBoZWFkZXIgbWVudQoJCXJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGFpbmVyICNlbmQgI2J1dHRvbnMnKTsKCX07CgoJLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgljb25zdCBkZXRlcm1pbmVZb3V0dWJlU2VjdGlvbiA9IGZ1bmN0aW9uICgpIHsKCQljb25zdCB7aHJlZn0gPSB3aW5kb3cubG9jYXRpb247CgoJCWxldCB5b3V0dWJlU2VjdGlvbiA9ICdtaXNjJzsKCQlpZiAoaHJlZi5pbmNsdWRlcygnL3dhdGNoPycpKSB7CgkJCXlvdXR1YmVTZWN0aW9uID0gJ3dhdGNoJzsKCQl9IGVsc2UgaWYgKGhyZWYubWF0Y2goLy4qXC8odXNlcnxjaGFubmVsfGMpXC8uK1wvdmlkZW9zL3UpIHx8IGhyZWYubWF0Y2goLy4qXC9ALiovdSkpIHsKCQkJeW91dHViZVNlY3Rpb24gPSAnY2hhbm5lbCc7CgkJfSBlbHNlIGlmIChocmVmLmluY2x1ZGVzKCcvZmVlZC9zdWJzY3JpcHRpb25zJykpIHsKCQkJeW91dHViZVNlY3Rpb24gPSAnc3Vic2NyaXB0aW9ucyc7CgkJfSBlbHNlIGlmIChocmVmLmluY2x1ZGVzKCcvZmVlZC90cmVuZGluZycpKSB7CgkJCXlvdXR1YmVTZWN0aW9uID0gJ3RyZW5kaW5nJzsKCQl9IGVsc2UgaWYgKGhyZWYuaW5jbHVkZXMoJy9wbGF5bGlzdD8nKSkgewoJCQl5b3V0dWJlU2VjdGlvbiA9ICdwbGF5bGlzdCc7CgkJfQoJCXJldHVybiB5b3V0dWJlU2VjdGlvbjsKCX07CgoJLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgljb25zdCB1cGRhdGVDbGFzc09uV2F0Y2hlZEl0ZW1zID0gZnVuY3Rpb24gKCkgewoJCS8vIFJlbW92ZSBleGlzdGluZyBjbGFzc2VzCgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLllULUhXVi1XQVRDSEVELURJTU1FRCcpLmZvckVhY2goKGVsKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdZVC1IV1YtV0FUQ0hFRC1ESU1NRUQnKSk7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLllULUhXVi1XQVRDSEVELUhJRERFTicpLmZvckVhY2goKGVsKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdZVC1IV1YtV0FUQ0hFRC1ISURERU4nKSk7CgoJCS8vIElmIHdlJ3JlIG9uIHRoZSBIaXN0b3J5IHBhZ2UgLS0gZG8gbm90aGluZy4gV2UgZG9uJ3Qgd2FudCB0byBoaWRlCgkJLy8gd2F0Y2hlZCB2aWRlb3MgaGVyZS4KCQlpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignL2ZlZWQvaGlzdG9yeScpID49IDApIHJldHVybjsKCgkJY29uc3Qgc2VjdGlvbiA9IGRldGVybWluZVlvdXR1YmVTZWN0aW9uKCk7CgkJY29uc3Qgc3RhdGUgPSBsb2NhbFN0b3JhZ2VbYFlUSFdWX1NUQVRFXyR7c2VjdGlvbn1gXTsKCgkJZmluZFdhdGNoZWRFbGVtZW50cygpLmZvckVhY2goKGl0ZW0sIF9pKSA9PiB7CgkJCWxldCB3YXRjaGVkSXRlbTsKCQkJbGV0IGRpbW1lZEl0ZW07CgoJCQkvLyAiU3Vic2NyaXB0aW9uIiBzZWN0aW9uIG5lZWRzIHVzIHRvIGhpZGUgdGhlICIjY29udGVudHMiLAoJCQkvLyBidXQgaW4gdGhlICJUcmVuZGluZyIgc2VjdGlvbiwgdGhhdCBjbGFzcyB3aWxsIGhpZGUgZXZlcnl0aGluZy4KCQkJLy8gU28gdGhlcmUsIHdlIG5lZWQgdG8gaGlkZSB0aGUgInl0ZC12aWRlby1yZW5kZXJlciIKCQkJaWYgKHNlY3Rpb24gPT09ICdzdWJzY3JpcHRpb25zJykgewoJCQkJLy8gRm9yIHJvd3MsIGhpZGUgdGhlIHJvdyBhbmQgdGhlIGhlYWRlciB0b28uIFdlIGNhbid0IGhpZGUKCQkJCS8vIHRoZWlyIGVudGlyZSBwYXJlbnQgYmVjYXVzZSB0aGVuIHdlJ2xsIGdldCB0aGUgaW5maW5pdGUKCQkJCS8vIHBhZ2UgbG9hZGVyIHRvIGxvYWQgZm9yZXZlci4KCQkJCXdhdGNoZWRJdGVtID0gKAoJCQkJCS8vIEdyaWQgaXRlbQoJCQkJCWl0ZW0uY2xvc2VzdCgnLnl0ZC1ncmlkLXJlbmRlcmVyJykgfHwKCQkJCQlpdGVtLmNsb3Nlc3QoJy55dGQtaXRlbS1zZWN0aW9uLXJlbmRlcmVyJykgfHwKCQkJCQlpdGVtLmNsb3Nlc3QoJy55dGQtcmljaC1ncmlkLXJvdycpIHx8CgkJCQkJLy8gTGlzdCBpdGVtCgkJCQkJaXRlbS5jbG9zZXN0KCcjZ3JpZC1jb250YWluZXInKQoJCQkJKTsKCgkJCQkvLyBJZiB3ZSdyZSBoaWRpbmcgdGhlIC55dGQtaXRlbS1zZWN0aW9uLXJlbmRlcmVyIGVsZW1lbnQsIHdlIG5lZWQgdG8gZ2l2ZSBpdAoJCQkJLy8gc29tZSBleHRyYSBzcGFjaW5nIG90aGVyd2lzZSB3ZSdsbCBnZXQgc3R1Y2sgaW4gaW5maW5pdGUgcGFnZSBsb2FkaW5nCgkJCQlpZiAod2F0Y2hlZEl0ZW0/LmNsYXNzTGlzdC5jb250YWlucygneXRkLWl0ZW0tc2VjdGlvbi1yZW5kZXJlcicpKSB7CgkJCQkJd2F0Y2hlZEl0ZW0uY2xvc2VzdCgneXRkLWl0ZW0tc2VjdGlvbi1yZW5kZXJlcicpLmNsYXNzTGlzdC5hZGQoJ1lULUhXVi1ISURERU4tUk9XLVBBUkVOVCcpOwoJCQkJfQoJCQl9IGVsc2UgaWYgKHNlY3Rpb24gPT09ICdwbGF5bGlzdCcpIHsKCQkJCXdhdGNoZWRJdGVtID0gaXRlbS5jbG9zZXN0KCd5dGQtcGxheWxpc3QtdmlkZW8tcmVuZGVyZXInKTsKCQkJfSBlbHNlIGlmIChzZWN0aW9uID09PSAnd2F0Y2gnKSB7CgkJCQl3YXRjaGVkSXRlbSA9IGl0ZW0uY2xvc2VzdCgneXRkLWNvbXBhY3QtdmlkZW8tcmVuZGVyZXInKTsKCgkJCQkvLyBEb24ndCBoaWRlIHZpZGVvIGlmIGl0J3MgZ29pbmcgdG8gcGxheSBuZXh0LgoJCQkJLy8KCQkJCS8vIElmIHRoZXJlIGlzIG5vIHdhdGNoZWRJdGVtIC0gd2UgcHJvYmFibHkgZ290CgkJCQkvLyBgeXRkLXBsYXlsaXN0LXBhbmVsLXZpZGVvLXJlbmRlcmVyYDoKCQkJCS8vIGxldCdzIGFsc28gaWdub3JlIGl0IGFzIGluIGNhc2Ugb2Ygc2h1ZmZsZSBlbmFibGVkCgkJCQkvLyB3ZSBjb3VsZCBhY2NpZGVudGlhbGx5IGhpZGUgdGhlIGl0ZW0gd2hpY2ggZ29ubmEgcGxheSBuZXh0LgoJCQkJaWYgKAoJCQkJCXdhdGNoZWRJdGVtPy5jbG9zZXN0KCd5dGQtY29tcGFjdC1hdXRvcGxheS1yZW5kZXJlcicpCgkJCQkpIHsKCQkJCQl3YXRjaGVkSXRlbSA9IG51bGw7CgkJCQl9CgoJCQkJLy8gRm9yIHBsYXlsaXN0IGl0ZW1zLCB3ZSBuZXZlciBoaWRlIHRoZW0sIGJ1dCB3ZSB3aWxsIGRpbQoJCQkJLy8gdGhlbSBldmVuIGlmIGN1cnJlbnQgbW9kZSBpcyB0byBoaWRlIHJhdGhlciB0aGFuIGRpbS4KCQkJCWNvbnN0IHdhdGNoZWRJdGVtSW5QbGF5bGlzdCA9IGl0ZW0uY2xvc2VzdCgneXRkLXBsYXlsaXN0LXBhbmVsLXZpZGVvLXJlbmRlcmVyJyk7CgkJCQlpZiAoIXdhdGNoZWRJdGVtICYmIHdhdGNoZWRJdGVtSW5QbGF5bGlzdCkgewoJCQkJCWRpbW1lZEl0ZW0gPSB3YXRjaGVkSXRlbUluUGxheWxpc3Q7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQkvLyBGb3IgaG9tZSBwYWdlIGFuZCBvdGhlciBhcmVhcwoJCQkJd2F0Y2hlZEl0ZW0gPSAoCgkJCQkJaXRlbS5jbG9zZXN0KCd5dGQtcmljaC1pdGVtLXJlbmRlcmVyJykgfHwKCQkJCQlpdGVtLmNsb3Nlc3QoJ3l0ZC12aWRlby1yZW5kZXJlcicpIHx8CgkJCQkJaXRlbS5jbG9zZXN0KCd5dGQtZ3JpZC12aWRlby1yZW5kZXJlcicpCgkJCQkpOwoJCQl9CgoJCQlpZiAod2F0Y2hlZEl0ZW0pIHsKCQkJCS8vIEFkZCBjdXJyZW50IGNsYXNzCgkJCQlpZiAoc3RhdGUgPT09ICdkaW1tZWQnKSB7CgkJCQkJd2F0Y2hlZEl0ZW0uY2xhc3NMaXN0LmFkZCgnWVQtSFdWLVdBVENIRUQtRElNTUVEJyk7CgkJCQl9IGVsc2UgaWYgKHN0YXRlID09PSAnaGlkZGVuJykgewoJCQkJCXdhdGNoZWRJdGVtLmNsYXNzTGlzdC5hZGQoJ1lULUhXVi1XQVRDSEVELUhJRERFTicpOwoJCQkJfQoJCQl9CgoJCQlpZiAoZGltbWVkSXRlbSAmJiAoc3RhdGUgPT09ICdkaW1tZWQnIHx8IHN0YXRlID09PSAnaGlkZGVuJykpIHsKCQkJCWRpbW1lZEl0ZW0uY2xhc3NMaXN0LmFkZCgnWVQtSFdWLVdBVENIRUQtRElNTUVEJyk7CgkJCX0KCQl9KTsKCX07CgoJLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCgljb25zdCB1cGRhdGVDbGFzc09uU2hvcnRzSXRlbXMgPSBmdW5jdGlvbiAoKSB7CgkJY29uc3Qgc2VjdGlvbiA9IGRldGVybWluZVlvdXR1YmVTZWN0aW9uKCk7CgoJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ZVC1IV1YtU0hPUlRTLURJTU1FRCcpLmZvckVhY2goKGVsKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdZVC1IV1YtU0hPUlRTLURJTU1FRCcpKTsKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuWVQtSFdWLVNIT1JUUy1ISURERU4nKS5mb3JFYWNoKChlbCkgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnWVQtSFdWLVNIT1JUUy1ISURERU4nKSk7CgoJCWNvbnN0IHN0YXRlID0gbG9jYWxTdG9yYWdlW2BZVEhXVl9TVEFURV9TSE9SVFNfJHtzZWN0aW9ufWBdOwoKCQljb25zdCBzaG9ydHNDb250YWluZXJzID0gZmluZFNob3J0c0NvbnRhaW5lcnMoKTsKCgkJc2hvcnRzQ29udGFpbmVycy5mb3JFYWNoKChpdGVtKSA9PiB7CgkJCS8vIEFkZCBjdXJyZW50IGNsYXNzCgkJCWlmIChzdGF0ZSA9PT0gJ2RpbW1lZCcpIHsKCQkJCWl0ZW0uY2xhc3NMaXN0LmFkZCgnWVQtSFdWLVNIT1JUUy1ESU1NRUQnKTsKCQkJfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ2hpZGRlbicpIHsKCQkJCWl0ZW0uY2xhc3NMaXN0LmFkZCgnWVQtSFdWLVNIT1JUUy1ISURERU4nKTsKCQkJfQoJCX0pOwoJfTsKCgkvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCWNvbnN0IHJlbmRlckJ1dHRvbnMgPSBmdW5jdGlvbiAoKSB7CgkJLy8gRmluZCBidXR0b24gYXJlYSB0YXJnZXQKCQljb25zdCB0YXJnZXQgPSBmaW5kQnV0dG9uQXJlYVRhcmdldCgpOwoJCWlmICghdGFyZ2V0KSByZXR1cm47CgoJCS8vIERpZCB3ZSBhbHJlYWR5IHJlbmRlciB0aGUgYnV0dG9ucz8KCQljb25zdCBleGlzdGluZ0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuWVQtSFdWLUJVVFRPTlMnKTsKCgkJLy8gR2VuZXJhdGUgYnV0dG9ucyBhcmVhIERPTQoJCWNvbnN0IGJ1dHRvbkFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCQlidXR0b25BcmVhLmNsYXNzTGlzdC5hZGQoJ1lULUhXVi1CVVRUT05TJyk7CgoJCS8vIFJlbmRlciBidXR0b25zCgkJQlVUVE9OUy5mb3JFYWNoKCh7aWNvbiwgaWNvbkhpZGRlbiwgbmFtZSwgc3RhdGVLZXksIHR5cGV9KSA9PiB7CgkJCS8vIEZvciB0b2dnbGUgYnV0dG9ucywgZGV0ZXJtaW5lIHdoZXJlIGluIGxvY2FsU3RvcmFnZSB0aGV5IHRyYWNrIHN0YXRlCgkJCWNvbnN0IHNlY3Rpb24gPSBkZXRlcm1pbmVZb3V0dWJlU2VjdGlvbigpOwoJCQljb25zdCBzdG9yYWdlS2V5ID0gW3N0YXRlS2V5LCBzZWN0aW9uXS5qb2luKCdfJyk7CgkJCWNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleSkgfHwgJ25vcm1hbCc7CgoJCQkvLyBHZW5lcmF0ZSBidXR0b24gRE9NCgkJCWNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwoJCQlidXR0b24udGl0bGUgPSB0eXBlID09PSAndG9nZ2xlJyA/IGAke25hbWV9IDogY3VycmVudGx5ICIke3RvZ2dsZUJ1dHRvblN0YXRlfSIgZm9yIHNlY3Rpb24gIiR7c2VjdGlvbn0iYCA6IGAke25hbWV9YDsKCQkJYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ1lULUhXVi1CVVRUT04nKTsKCQkJaWYgKHRvZ2dsZUJ1dHRvblN0YXRlICE9PSAnbm9ybWFsJykgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ1lULUhXVi1CVVRUT04tRElTQUJMRUQnKTsKCQkJYnV0dG9uLmlubmVySFRNTCA9IHRvZ2dsZUJ1dHRvblN0YXRlID09PSAnaGlkZGVuJyA/IGljb25IaWRkZW4gOiBpY29uOwoJCQlidXR0b25BcmVhLmFwcGVuZENoaWxkKGJ1dHRvbik7CgoJCQkvLyBBdHRhY2ggZXZlbnRzIGZvciB0b2dnbGUgYnV0dG9ucwoJCQlzd2l0Y2ggKHR5cGUpIHsKCQkJCWNhc2UgJ3RvZ2dsZSc6CgkJCQkJYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewoJCQkJCQlsb2dEZWJ1ZyhgQnV0dG9uICR7bmFtZX0gY2xpY2tlZC4gU3RhdGU6ICR7dG9nZ2xlQnV0dG9uU3RhdGV9YCk7CgoJCQkJCQlsZXQgbmV3U3RhdGUgPSAnZGltbWVkJzsKCQkJCQkJaWYgKHRvZ2dsZUJ1dHRvblN0YXRlID09PSAnZGltbWVkJykgewoJCQkJCQkJbmV3U3RhdGUgPSAnaGlkZGVuJzsKCQkJCQkJfSBlbHNlIGlmICh0b2dnbGVCdXR0b25TdGF0ZSA9PT0gJ2hpZGRlbicpIHsKCQkJCQkJCW5ld1N0YXRlID0gJ25vcm1hbCc7CgkJCQkJCX0KCgkJCQkJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIG5ld1N0YXRlKTsKCgkJCQkJCXVwZGF0ZUNsYXNzT25XYXRjaGVkSXRlbXMoKTsKCQkJCQkJdXBkYXRlQ2xhc3NPblNob3J0c0l0ZW1zKCk7CgkJCQkJCXJlbmRlckJ1dHRvbnMoKTsKCQkJCQl9KTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJ3NldHRpbmdzJzoKCQkJCQlidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CgkJCQkJCWdtYy5vcGVuKCk7CgkJCQkJCXJlbmRlckJ1dHRvbnMoKTsKCQkJCQl9KTsKCQkJCQlicmVhazsKCQkJfQoJCX0pOwoKCQkvLyBJbnNlcnQgYnV0dG9ucyBpbnRvIERPTQoJCWlmIChleGlzdGluZ0J1dHRvbnMpIHsKCQkJdGFyZ2V0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGJ1dHRvbkFyZWEsIGV4aXN0aW5nQnV0dG9ucyk7CgkJCWxvZ0RlYnVnKCdSZS1yZW5kZXJlZCBtZW51IGJ1dHRvbnMnKTsKCQl9IGVsc2UgewoJCQl0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYnV0dG9uQXJlYSwgdGFyZ2V0KTsKCQkJbG9nRGVidWcoJ1JlbmRlcmVkIG1lbnUgYnV0dG9ucycpOwoJCX0KCX07CgoJY29uc3QgcnVuID0gZGVib3VuY2UoKG11dGF0aW9ucykgPT4gewoKCQkvLyBkb24ndCByZWFjdCBpZiBvbmx5ICpPVVIqIG93biBidXR0b25zIGNoYW5nZWQgc3RhdGUKCQkvLyB0byBhdm9pZCBydW5uaW5nIGFuIGVuZGxlc3MgbG9vcAoKCQlpZiAobXV0YXRpb25zICYmIG11dGF0aW9ucy5sZW5ndGggPT09IDEpIHsgcmV0dXJuOyB9CgoJCWlmIChtdXRhdGlvbnNbMF0udGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnWVQtSFdWLUJVVFRPTicpIHx8CgkJCW11dGF0aW9uc1swXS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdZVC1IV1YtQlVUVE9OLVNIT1JUUycpKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIHNvbWV0aGluZyAqRUxTRSogY2hhbmdlZCBzdGF0ZSAobm90IG91ciBidXR0b25zKSwgc28ga2VlcCBnb2luZwoKCQlsb2dEZWJ1ZygnUnVubmluZyBjaGVjayBmb3Igd2F0Y2hlZCB2aWRlb3MsIGFuZCBzaG9ydHMnKTsKCQl1cGRhdGVDbGFzc09uV2F0Y2hlZEl0ZW1zKCk7CgkJdXBkYXRlQ2xhc3NPblNob3J0c0l0ZW1zKCk7CgkJcmVuZGVyQnV0dG9ucygpOwoJfSwgMjUwKTsKCgkvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCS8vIEhpamFjayBhbGwgWEhSIGNhbGxzCgljb25zdCBzZW5kID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQ7CglYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChkYXRhKSB7CgkJdGhpcy5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24gKCkgewoJCQlpZiAoCgkJCQkvLyBBbnl0aW1lIG1vcmUgdmlkZW9zIGFyZSBmZXRjaGVkIC0tIHJlLXJ1biBzY3JpcHQKCQkJCXRoaXMucmVzcG9uc2VVUkwuaW5kZXhPZignYnJvd3NlX2FqYXg/YWN0aW9uX2NvbnRpbnVhdGlvbicpID4gMAoJCQkpIHsKCQkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJCXJ1bigpOwoJCQkJfSwgMCk7CgkJCX0KCQl9LCBmYWxzZSk7CgkJc2VuZC5jYWxsKHRoaXMsIGRhdGEpOwoJfTsKCgkvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCWNvbnN0IG9ic2VydmVET00gPSAoZnVuY3Rpb24gKCkgewoJCWNvbnN0IE11dGF0aW9uT2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjsKCQljb25zdCBldmVudExpc3RlbmVyU3VwcG9ydGVkID0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXI7CgoJCXJldHVybiBmdW5jdGlvbiAob2JqLCBjYWxsYmFjaykgewoJCQlsb2dEZWJ1ZygnQXR0YWNoaW5nIERPTSBsaXN0ZW5lcicpOwoKCQkJLy8gSW52YWxpZCBgb2JqYCBnaXZlbgoJCQlpZiAoIW9iaikgcmV0dXJuOwoKCQkJaWYgKE11dGF0aW9uT2JzZXJ2ZXIpIHsKCQkJCWNvbnN0IG9icyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgobXV0YXRpb25zLCBfb2JzZXJ2ZXIpID0+IHsKCQkJCQlpZiAobXV0YXRpb25zWzBdLmFkZGVkTm9kZXMubGVuZ3RoIHx8IG11dGF0aW9uc1swXS5yZW1vdmVkTm9kZXMubGVuZ3RoKSB7CgoJCQkJCQljYWxsYmFjayhtdXRhdGlvbnMpOwoJCQkJCX0KCQkJCX0pKTsKCgkJCQlvYnMub2JzZXJ2ZShvYmosIHtjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWV9KTsKCQkJfSBlbHNlIGlmIChldmVudExpc3RlbmVyU3VwcG9ydGVkKSB7CgkJCQlvYmouYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgY2FsbGJhY2ssIGZhbHNlKTsKCQkJCW9iai5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlUmVtb3ZlZCcsIGNhbGxiYWNrLCBmYWxzZSk7CgkJCX0KCQl9OwoJfSgpKTsKCgkvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCWxvZ0RlYnVnKCdTdGFydGluZyBTY3JpcHQnKTsKCgkvLyBZb3VUdWJlIGRvZXMgbmF2aWdhdGlvbiB2aWEgaGlzdG9yeSBhbmQgYWxzbyBkb2VzIGEgYnVuY2gKCS8vIG9mIEFKQVggdmlkZW8gbG9hZGluZy4gSW4gb3JkZXIgdG8gZW5zdXJlIHdlJ3JlIGFsd2F5cyB1cAoJLy8gdG8gZGF0ZSwgd2UgaGF2ZSB0byBsaXN0ZW4gZm9yIEFOWSBET00gY2hhbmdlIGV2ZW50LCBhbmQKCS8vIHJlLXJ1biBvdXIgc2NyaXB0LgoJb2JzZXJ2ZURPTShkb2N1bWVudC5ib2R5LCBydW4pOwoKCXJ1bigpOwp9KCkpOwo=",
            "requires":
            [
                {
                    "meta":
                    {
                        "name": "GM_config.js",
                        "url": "https://openuserjs.org/src/libs/sizzle/GM_config.js",
                        "ts": 1717332399295,
                        "mimetype": "text/javascript"
                    },
                    "source": "LyoNCkNvcHlyaWdodCAyMDA5KywgR01fY29uZmlnIENvbnRyaWJ1dG9ycyAoaHR0cHM6Ly9naXRodWIuY29tL3NpenpsZW1jdHdpenpsZS9HTV9jb25maWcpDQoNCkdNX2NvbmZpZyBDb2xsYWJvcmF0b3JzL0NvbnRyaWJ1dG9yczoNCiAgICBNaWtlIE1lZGxleSA8bWVkbGV5bWluZEBnbWFpbC5jb20+DQogICAgSm9lIFNpbW1vbnMNCiAgICBJenp5IFNvZnQNCiAgICBNYXJ0aSBNYXJ0eg0KICAgIEFkYW0gVGhvbXBzb24tU2hhcnBlDQoNCkdNX2NvbmZpZyBpcyBkaXN0cmlidXRlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZS4NCg0KICAgIEdNX2NvbmZpZyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5DQogICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5DQogICAgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3INCiAgICAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLg0KDQogICAgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsDQogICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YNCiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlDQogICAgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuDQoNCiAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UNCiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uDQoqLw0KDQovLyA9PVVzZXJTY3JpcHQ9PQ0KLy8gQGV4Y2x1ZGUgICAgICAgKg0KLy8gQGF1dGhvciAgICAgICAgTWlrZSBNZWRsZXkgPG1lZGxleW1pbmRAZ21haWwuY29tPiAoaHR0cHM6Ly9naXRodWIuY29tL3NpenpsZW1jdHdpenpsZS9HTV9jb25maWcpDQovLyBAaWNvbiAgICAgICAgICBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2l6emxlbWN0d2l6emxlL0dNX2NvbmZpZy9tYXN0ZXIvZ21fY29uZmlnX2ljb25fbGFyZ2UucG5nDQoNCi8vID09VXNlckxpYnJhcnk9PQ0KLy8gQG5hbWUgICAgICAgICAgR01fY29uZmlnDQovLyBAZGVzY3JpcHRpb24gICBBIGxpZ2h0d2VpZ2h0LCByZXVzYWJsZSwgY3Jvc3MtYnJvd3NlciBncmFwaGljYWwgc2V0dGluZ3MgZnJhbWV3b3JrIGZvciBpbmNsdXNpb24gaW4gdXNlciBzY3JpcHRzLg0KLy8gQGNvcHlyaWdodCAgICAgMjAwOSssIE1pa2UgTWVkbGV5IChodHRwczovL2dpdGh1Yi5jb20vc2l6emxlbWN0d2l6emxlKQ0KLy8gQGxpY2Vuc2UgICAgICAgTEdQTC0zLjAtb3ItbGF0ZXI7IGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zaXp6bGVtY3R3aXp6bGUvR01fY29uZmlnL21hc3Rlci9MSUNFTlNFDQoNCi8vIEBob21lcGFnZVVSTCAgIGh0dHBzOi8vb3BlbnVzZXJqcy5vcmcvbGlicy9zaXp6bGUvR01fY29uZmlnDQovLyBAaG9tZXBhZ2VVUkwgICBodHRwczovL2dpdGh1Yi5jb20vc2l6emxlbWN0d2l6emxlL0dNX2NvbmZpZw0KLy8gQHN1cHBvcnRVUkwgICAgaHR0cHM6Ly9naXRodWIuY29tL3NpenpsZW1jdHdpenpsZS9HTV9jb25maWcvaXNzdWVzDQoNCi8vID09L1VzZXJTY3JpcHQ9PQ0KDQovLyA9PS9Vc2VyTGlicmFyeT09DQoNCi8qIGpzaGludCBlc3ZlcnNpb246IDggKi8NCg0KbGV0IEdNX2NvbmZpZyA9IChmdW5jdGlvbiAoR00pIHsNCiAgLy8gVGhpcyBpcyB0aGUgaW5pdGlhbGl6ZXIgZnVuY3Rpb24NCiAgZnVuY3Rpb24gR01fY29uZmlnSW5pdChjb25maWcsIGFyZ3MpIHsNCiAgICAvLyBJbml0aWFsaXplIGluc3RhbmNlIHZhcmlhYmxlcw0KICAgIGlmICh0eXBlb2YgY29uZmlnLmZpZWxkcyA9PSAidW5kZWZpbmVkIikgew0KICAgICAgY29uZmlnLmZpZWxkcyA9IHt9Ow0KICAgICAgY29uZmlnLm9uSW5pdCA9IGNvbmZpZy5vbkluaXQgfHwgZnVuY3Rpb24oKSB7fTsNCiAgICAgIGNvbmZpZy5vbk9wZW4gPSBjb25maWcub25PcGVuIHx8IGZ1bmN0aW9uKCkge307DQogICAgICBjb25maWcub25TYXZlID0gY29uZmlnLm9uU2F2ZSB8fCBmdW5jdGlvbigpIHt9Ow0KICAgICAgY29uZmlnLm9uQ2xvc2UgPSBjb25maWcub25DbG9zZSB8fCBmdW5jdGlvbigpIHt9Ow0KICAgICAgY29uZmlnLm9uUmVzZXQgPSBjb25maWcub25SZXNldCB8fCBmdW5jdGlvbigpIHt9Ow0KICAgICAgY29uZmlnLmlzT3BlbiA9IGZhbHNlOw0KICAgICAgY29uZmlnLnRpdGxlID0gJ1VzZXIgU2NyaXB0IFNldHRpbmdzJzsNCiAgICAgIGNvbmZpZy5jc3MgPSB7DQogICAgICAgIGJhc2ljOiBbDQogICAgICAgICAgIiNHTV9jb25maWcgKiB7IGZvbnQtZmFtaWx5OiBhcmlhbCx0YWhvbWEsbXlyaWFkIHBybyxzYW5zLXNlcmlmOyB9IiwNCiAgICAgICAgICAiI0dNX2NvbmZpZyB7IGJhY2tncm91bmQ6ICNGRkY7IH0iLA0KICAgICAgICAgICIjR01fY29uZmlnIGlucHV0W3R5cGU9J3JhZGlvJ10geyBtYXJnaW4tcmlnaHQ6IDhweDsgfSIsDQogICAgICAgICAgIiNHTV9jb25maWcgLmluZGVudDQwIHsgbWFyZ2luLWxlZnQ6IDQwJTsgfSIsDQogICAgICAgICAgIiNHTV9jb25maWcgLmZpZWxkX2xhYmVsIHsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLXJpZ2h0OiA2cHg7IH0iLA0KICAgICAgICAgICIjR01fY29uZmlnIC5yYWRpb19sYWJlbCB7IGZvbnQtc2l6ZTogMTJweDsgfSIsDQogICAgICAgICAgIiNHTV9jb25maWcgLmJsb2NrIHsgZGlzcGxheTogYmxvY2s7IH0iLA0KICAgICAgICAgICIjR01fY29uZmlnIC5zYXZlY2xvc2VfYnV0dG9ucyB7IG1hcmdpbjogMTZweCAxMHB4IDEwcHg7IHBhZGRpbmc6IDJweCAxMnB4OyB9IiwNCiAgICAgICAgICAiI0dNX2NvbmZpZyAucmVzZXQsICNHTV9jb25maWcgLnJlc2V0IGEsIiArDQogICAgICAgICAgICAiICNHTV9jb25maWdfYnV0dG9uc19ob2xkZXIgeyBjb2xvcjogIzAwMDsgdGV4dC1hbGlnbjogcmlnaHQ7IH0iLA0KICAgICAgICAgICIjR01fY29uZmlnIC5jb25maWdfaGVhZGVyIHsgZm9udC1zaXplOiAyMHB0OyBtYXJnaW46IDA7IH0iLA0KICAgICAgICAgICIjR01fY29uZmlnIC5jb25maWdfZGVzYywgI0dNX2NvbmZpZyAuc2VjdGlvbl9kZXNjLCAjR01fY29uZmlnIC5yZXNldCB7IGZvbnQtc2l6ZTogOXB0OyB9IiwNCiAgICAgICAgICAiI0dNX2NvbmZpZyAuY2VudGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9IiwNCiAgICAgICAgICAiI0dNX2NvbmZpZyAuc2VjdGlvbl9oZWFkZXJfaG9sZGVyIHsgbWFyZ2luLXRvcDogOHB4OyB9IiwNCiAgICAgICAgICAiI0dNX2NvbmZpZyAuY29uZmlnX3ZhciB7IG1hcmdpbjogMCAwIDRweDsgfSIsDQogICAgICAgICAgIiNHTV9jb25maWcgLnNlY3Rpb25faGVhZGVyIHsgYmFja2dyb3VuZDogIzQxNDE0MTsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgY29sb3I6ICNGRkY7IiwNCiAgICAgICAgICAiIGZvbnQtc2l6ZTogMTNwdDsgbWFyZ2luOiAwOyB9IiwNCiAgICAgICAgICAiI0dNX2NvbmZpZyAuc2VjdGlvbl9kZXNjIHsgYmFja2dyb3VuZDogI0VGRUZFRjsgYm9yZGVyOiAxcHggc29saWQgI0NDQzsgY29sb3I6ICM1NzU3NTc7IiArDQogICAgICAgICAgICAiIGZvbnQtc2l6ZTogOXB0OyBtYXJnaW46IDAgMCA2cHg7IH0iDQogICAgICAgICAgXS5qb2luKCdcbicpICsgJ1xuJywNCiAgICAgICAgYmFzaWNQcmVmaXg6ICJHTV9jb25maWciLA0KICAgICAgICBzdHlsaXNoOiAiIg0KICAgICAgfTsNCiAgICB9DQogICAgY29uZmlnLmZyYW1lU3R5bGUgPSBbDQogICAgICAnYm90dG9tOiBhdXRvOyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBkaXNwbGF5OiBub25lOyBoZWlnaHQ6IDc1JTsnLA0KICAgICAgJ2xlZnQ6IDA7IG1hcmdpbjogMDsgbWF4LWhlaWdodDogOTUlOyBtYXgtd2lkdGg6IDk1JTsgb3BhY2l0eTogMDsnLA0KICAgICAgJ292ZXJmbG93OiBhdXRvOyBwYWRkaW5nOiAwOyBwb3NpdGlvbjogZml4ZWQ7IHJpZ2h0OiBhdXRvOyB0b3A6IDA7JywNCiAgICAgICd3aWR0aDogNzUlOyB6LWluZGV4OiA5OTk5OycNCgldLmpvaW4oJyAnKTsNCg0KICAgIHZhciBzZXR0aW5ncyA9IG51bGw7DQogICAgaWYgKGFyZ3MubGVuZ3RoID09IDEgJiYNCiAgICAgIHR5cGVvZiBhcmdzWzBdLmlkID09ICJzdHJpbmciICYmDQogICAgICB0eXBlb2YgYXJnc1swXS5hcHBlbmRDaGlsZCAhPSAiZnVuY3Rpb24iKSBzZXR0aW5ncyA9IGFyZ3NbMF07DQogICAgZWxzZSB7DQogICAgICAvLyBQcm92aWRlIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IHdpdGggYXJndW1lbnQgc3R5bGUgaW50aWFsaXphdGlvbg0KICAgICAgc2V0dGluZ3MgPSB7fTsNCg0KICAgICAgLy8gbG9vcCB0aHJvdWdoIEdNX2NvbmZpZy5pbml0KCkgYXJndW1lbnRzDQogICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFyZ3MubGVuZ3RoLCBhcmc7IGkgPCBsOyArK2kpIHsNCiAgICAgICAgYXJnID0gYXJnc1tpXTsNCg0KICAgICAgICAvLyBBbiBlbGVtZW50IHRvIHVzZSBhcyB0aGUgY29uZmlnIHdpbmRvdw0KICAgICAgICBpZiAodHlwZW9mIGFyZy5hcHBlbmRDaGlsZCA9PSAiZnVuY3Rpb24iKSB7DQogICAgICAgICAgc2V0dGluZ3MuZnJhbWUgPSBhcmc7DQogICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCg0KICAgICAgICBzd2l0Y2ggKHR5cGVvZiBhcmcpIHsNCiAgICAgICAgICBjYXNlICdvYmplY3QnOg0KICAgICAgICAgICAgZm9yIChsZXQgaiBpbiBhcmcpIHsgLy8gY291bGQgYmUgYSBjYWxsYmFjayBmdW5jdGlvbnMgb3Igc2V0dGluZ3Mgb2JqZWN0DQogICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnW2pdICE9ICJmdW5jdGlvbiIpIHsgLy8gd2UgYXJlIGluIHRoZSBzZXR0aW5ncyBvYmplY3QNCiAgICAgICAgICAgICAgICBzZXR0aW5ncy5maWVsZHMgPSBhcmc7IC8vIHN0b3JlIHNldHRpbmdzIG9iamVjdA0KICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBsZWF2ZSB0aGUgbG9vcA0KICAgICAgICAgICAgICB9IC8vIG90aGVyd2lzZSBpdCBtdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb24NCiAgICAgICAgICAgICAgaWYgKCFzZXR0aW5ncy5ldmVudHMpIHNldHRpbmdzLmV2ZW50cyA9IHt9Ow0KICAgICAgICAgICAgICBzZXR0aW5ncy5ldmVudHNbal0gPSBhcmdbal07DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICdmdW5jdGlvbic6IC8vIHBhc3NpbmcgYSBiYXJlIGZ1bmN0aW9uIGlzIHNldCB0byBvcGVuIGNhbGxiYWNrDQogICAgICAgICAgICBzZXR0aW5ncy5ldmVudHMgPSB7b25PcGVuOiBhcmd9Ow0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAnc3RyaW5nJzogLy8gY291bGQgYmUgY3VzdG9tIENTUyBvciB0aGUgdGl0bGUgc3RyaW5nDQogICAgICAgICAgICBpZiAoL1x3K1xzKlx7XHMqXHcrXHMqOlxzKlx3K1tcc3xcU10qXH0vLnRlc3QoYXJnKSkNCiAgICAgICAgICAgICAgc2V0dGluZ3MuY3NzID0gYXJnOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICBzZXR0aW5ncy50aXRsZSA9IGFyZzsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyogSW5pdGlhbGl6ZSBldmVyeXRoaW5nIHVzaW5nIHRoZSBuZXcgc2V0dGluZ3Mgb2JqZWN0ICovDQogICAgLy8gU2V0IHRoZSBpZA0KICAgIGlmIChzZXR0aW5ncy5pZCkgY29uZmlnLmlkID0gc2V0dGluZ3MuaWQ7DQogICAgZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5pZCA9PSAidW5kZWZpbmVkIikgY29uZmlnLmlkID0gJ0dNX2NvbmZpZyc7DQoNCiAgICAvLyBTZXQgdGhlIHRpdGxlDQogICAgaWYgKHNldHRpbmdzLnRpdGxlKSBjb25maWcudGl0bGUgPSBzZXR0aW5ncy50aXRsZTsNCg0KICAgIC8vIFNldCB0aGUgY3VzdG9tIGNzcw0KICAgIGlmIChzZXR0aW5ncy5jc3MpIGNvbmZpZy5jc3Muc3R5bGlzaCA9IHNldHRpbmdzLmNzczsNCg0KICAgIC8vIFNldCB0aGUgZnJhbWUNCiAgICBpZiAoc2V0dGluZ3MuZnJhbWUpIGNvbmZpZy5mcmFtZSA9IHNldHRpbmdzLmZyYW1lOw0KCQ0KICAgIC8vIFNldCB0aGUgc3R5bGUgYXR0cmlidXRlIG9mIHRoZSBmcmFtZQ0KICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MuZnJhbWVTdHlsZSA9PT0gJ3N0cmluZycpIGNvbmZpZy5mcmFtZVN0eWxlID0gc2V0dGluZ3MuZnJhbWVTdHlsZTsNCg0KICAgIC8vIFNldCB0aGUgZXZlbnQgY2FsbGJhY2tzDQogICAgaWYgKHNldHRpbmdzLmV2ZW50cykgew0KICAgICAgbGV0IGV2ZW50cyA9IHNldHRpbmdzLmV2ZW50czsNCiAgICAgIGZvciAobGV0IGUgaW4gZXZlbnRzKSB7DQogICAgICAgIGNvbmZpZ1sib24iICsgZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGUuc2xpY2UoMSldID0gZXZlbnRzW2VdOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIElmIHRoZSBpZCBoYXMgY2hhbmdlZCB3ZSBtdXN0IG1vZGlmeSB0aGUgZGVmYXVsdCBzdHlsZQ0KICAgIGlmIChjb25maWcuaWQgIT0gY29uZmlnLmNzcy5iYXNpY1ByZWZpeCkgew0KICAgICAgY29uZmlnLmNzcy5iYXNpYyA9IGNvbmZpZy5jc3MuYmFzaWMucmVwbGFjZSgNCiAgICAgICAgbmV3IFJlZ0V4cCgnIycgKyBjb25maWcuY3NzLmJhc2ljUHJlZml4LCAnZ20nKSwgJyMnICsgY29uZmlnLmlkKTsNCiAgICAgIGNvbmZpZy5jc3MuYmFzaWNQcmVmaXggPSBjb25maWcuaWQ7DQogICAgfQ0KDQogICAgLy8gQ3JlYXRlIHRoZSBmaWVsZHMNCiAgICBjb25maWcuaXNJbml0ID0gZmFsc2U7DQogICAgaWYgKHNldHRpbmdzLmZpZWxkcykgew0KICAgICAgY29uZmlnLnJlYWQobnVsbCwgKHN0b3JlZCkgPT4geyAvLyByZWFkIHRoZSBzdG9yZWQgc2V0dGluZ3MNCiAgICAgICAgbGV0IGZpZWxkcyA9IHNldHRpbmdzLmZpZWxkcywNCiAgICAgICAgICAgIGN1c3RvbVR5cGVzID0gc2V0dGluZ3MudHlwZXMgfHwge30sDQogICAgICAgICAgICBjb25maWdJZCA9IGNvbmZpZy5pZDsNCg0KICAgICAgICBmb3IgKGxldCBpZCBpbiBmaWVsZHMpIHsNCiAgICAgICAgICBsZXQgZmllbGQgPSBmaWVsZHNbaWRdLA0KICAgICAgICAgICAgICBmaWVsZEV4aXN0cyA9IGZhbHNlOw0KDQogICAgICAgICAgaWYgKGNvbmZpZy5maWVsZHNbaWRdKSB7DQogICAgICAgICAgICBmaWVsZEV4aXN0cyA9IHRydWU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gZm9yIGVhY2ggZmllbGQgZGVmaW5pdGlvbiBjcmVhdGUgYSBmaWVsZCBvYmplY3QNCiAgICAgICAgICBpZiAoZmllbGQpIHsNCiAgICAgICAgICAgIGlmIChjb25maWcuaXNPcGVuICYmIGZpZWxkRXhpc3RzKSB7DQogICAgICAgICAgICAgICAgY29uZmlnLmZpZWxkc1tpZF0ucmVtb3ZlKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbmZpZy5maWVsZHNbaWRdID0gbmV3IEdNX2NvbmZpZ0ZpZWxkKGZpZWxkLCBzdG9yZWRbaWRdLCBpZCwNCiAgICAgICAgICAgICAgY3VzdG9tVHlwZXNbZmllbGQudHlwZV0sIGNvbmZpZ0lkKTsNCg0KICAgICAgICAgICAgLy8gQWRkIGZpZWxkIHRvIG9wZW4gZnJhbWUNCiAgICAgICAgICAgIGlmIChjb25maWcuaXNPcGVuKSB7DQogICAgICAgICAgICAgIGNvbmZpZy5maWVsZHNbaWRdLndyYXBwZXIgPSBjb25maWcuZmllbGRzW2lkXS50b05vZGUoKTsNCiAgICAgICAgICAgICAgY29uZmlnLmZyYW1lU2VjdGlvbi5hcHBlbmRDaGlsZChjb25maWcuZmllbGRzW2lkXS53cmFwcGVyKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2UgaWYgKCFmaWVsZCAmJiBmaWVsZEV4aXN0cykgew0KICAgICAgICAgICAgLy8gUmVtb3ZlIGZpZWxkIGZyb20gb3BlbiBmcmFtZQ0KICAgICAgICAgICAgaWYgKGNvbmZpZy5pc09wZW4pIHsNCiAgICAgICAgICAgICAgY29uZmlnLmZpZWxkc1tpZF0ucmVtb3ZlKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRlbGV0ZSBjb25maWcuZmllbGRzW2lkXTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBjb25maWcuaXNJbml0ID0gdHJ1ZTsNCiAgICAgICAgY29uZmlnLm9uSW5pdC5jYWxsKGNvbmZpZyk7DQogICAgICB9KTsNCiAgICB9IGVsc2Ugew0KICAgICAgY29uZmlnLmlzSW5pdCA9IHRydWU7DQogICAgICBjb25maWcub25Jbml0LmNhbGwoY29uZmlnKTsNCiAgICB9DQogIH0NCg0KICBsZXQgY29uc3RydWN0ID0gZnVuY3Rpb24gKCkgew0KICAgIC8vIFBhcnNpbmcgb2YgaW5wdXQgcHJvdmlkZWQgdmlhIGZyb250ZW5kcw0KICAgIEdNX2NvbmZpZ0luaXQodGhpcywgYXJndW1lbnRzKTsNCiAgfTsNCiAgY29uc3RydWN0LnByb3RvdHlwZSA9IHsNCiAgICAvLyBTdXBwb3J0IHJlLWluaXRhbGl6YXRpb24NCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgIEdNX2NvbmZpZ0luaXQodGhpcywgYXJndW1lbnRzKTsNCiAgICB9LA0KDQogICAgLy8gY2FsbCBHTV9jb25maWcub3BlbigpIGZyb20geW91ciBzY3JpcHQgdG8gb3BlbiB0aGUgbWVudQ0KICAgIG9wZW46IGZ1bmN0aW9uICgpIHsNCiAgICAgIC8vIGRvbid0IG9wZW4gYmVmb3JlIGluaXQgaXMgZmluaXNoZWQNCiAgICAgIGlmICghdGhpcy5pc0luaXQpIHsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLm9wZW4oKSwgMCk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIC8vIERpZSBpZiB0aGUgbWVudSBpcyBhbHJlYWR5IG9wZW4gb24gdGhpcyBwYWdlDQogICAgICAvLyBZb3UgY2FuIGhhdmUgbXVsdGlwbGUgaW5zdGFuY2VzIGJ1dCB5b3UgY2FuJ3Qgb3BlbiB0aGUgc2FtZSBpbnN0YW5jZSB0d2ljZQ0KICAgICAgbGV0IG1hdGNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCk7DQogICAgICBpZiAobWF0Y2ggJiYgKG1hdGNoLnRhZ05hbWUgPT0gIklGUkFNRSIgfHwgbWF0Y2guY2hpbGROb2Rlcy5sZW5ndGggPiAwKSkgcmV0dXJuOw0KDQogICAgICAvLyBTb21ldGltZXMgInRoaXMiIGdldHMgb3ZlcndyaXR0ZW4gc28gY3JlYXRlIGFuIGFsaWFzDQogICAgICBsZXQgY29uZmlnID0gdGhpczsNCg0KICAgICAgLy8gRnVuY3Rpb24gdG8gYnVpbGQgdGhlIG1pZ2h0eSBjb25maWcgd2luZG93IDopDQogICAgICBmdW5jdGlvbiBidWlsZENvbmZpZ1dpbiAoYm9keSwgaGVhZCkgew0KICAgICAgICBsZXQgY3JlYXRlID0gY29uZmlnLmNyZWF0ZSwNCiAgICAgICAgICAgIGZpZWxkcyA9IGNvbmZpZy5maWVsZHMsDQogICAgICAgICAgICBjb25maWdJZCA9IGNvbmZpZy5pZCwNCiAgICAgICAgICAgIGJvZHlXcmFwcGVyID0gY3JlYXRlKCdkaXYnLCB7aWQ6IGNvbmZpZ0lkICsgJ193cmFwcGVyJ30pOw0KDQogICAgICAgIC8vIEFwcGVuZCB0aGUgc3R5bGUgd2hpY2ggaXMgb3VyIGRlZmF1bHQgc3R5bGUgcGx1cyB0aGUgdXNlciBzdHlsZQ0KICAgICAgICBoZWFkLmFwcGVuZENoaWxkKA0KICAgICAgICAgIGNyZWF0ZSgnc3R5bGUnLCB7DQogICAgICAgICAgdHlwZTogJ3RleHQvY3NzJywNCiAgICAgICAgICB0ZXh0Q29udGVudDogY29uZmlnLmNzcy5iYXNpYyArIGNvbmZpZy5jc3Muc3R5bGlzaA0KICAgICAgICB9KSk7DQoNCiAgICAgICAgLy8gQWRkIGhlYWRlciBhbmQgdGl0bGUNCiAgICAgICAgYm9keVdyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlKCdkaXYnLCB7DQogICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19oZWFkZXInLA0KICAgICAgICAgIGNsYXNzTmFtZTogJ2NvbmZpZ19oZWFkZXIgYmxvY2sgY2VudGVyJw0KICAgICAgICB9LCBjb25maWcudGl0bGUpKTsNCg0KICAgICAgICAvLyBBcHBlbmQgZWxlbWVudHMNCiAgICAgICAgbGV0IHNlY3Rpb24gPSBib2R5V3JhcHBlciwNCiAgICAgICAgICAgIHNlY051bSA9IDA7IC8vIFNlY3Rpb24gY291bnQNCg0KICAgICAgICAvLyBsb29wIHRocm91Z2ggZmllbGRzDQogICAgICAgIGZvciAobGV0IGlkIGluIGZpZWxkcykgew0KICAgICAgICAgIGxldCBmaWVsZCA9IGZpZWxkc1tpZF0sDQogICAgICAgICAgICAgIHNldHRpbmdzID0gZmllbGQuc2V0dGluZ3M7DQoNCiAgICAgICAgICBpZiAoc2V0dGluZ3Muc2VjdGlvbikgeyAvLyB0aGUgc3RhcnQgb2YgYSBuZXcgc2VjdGlvbg0KICAgICAgICAgICAgc2VjdGlvbiA9IGJvZHlXcmFwcGVyLmFwcGVuZENoaWxkKGNyZWF0ZSgnZGl2Jywgew0KICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlY3Rpb25faGVhZGVyX2hvbGRlcicsDQogICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19zZWN0aW9uXycgKyBzZWNOdW0NCiAgICAgICAgICAgICAgfSkpOw0KDQogICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2V0dGluZ3Muc2VjdGlvbikpDQogICAgICAgICAgICAgIHNldHRpbmdzLnNlY3Rpb24gPSBbc2V0dGluZ3Muc2VjdGlvbl07DQoNCiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zZWN0aW9uWzBdKQ0KICAgICAgICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKGNyZWF0ZSgnZGl2Jywgew0KICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlY3Rpb25faGVhZGVyIGNlbnRlcicsDQogICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19zZWN0aW9uX2hlYWRlcl8nICsgc2VjTnVtDQogICAgICAgICAgICAgIH0sIHNldHRpbmdzLnNlY3Rpb25bMF0pKTsNCg0KICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNlY3Rpb25bMV0pDQogICAgICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQoY3JlYXRlKCdwJywgew0KICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlY3Rpb25fZGVzYyBjZW50ZXInLA0KICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfc2VjdGlvbl9kZXNjXycgKyBzZWNOdW0NCiAgICAgICAgICAgICAgfSwgc2V0dGluZ3Muc2VjdGlvblsxXSkpOw0KICAgICAgICAgICAgKytzZWNOdW07DQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgICAgICAgIGlmIChzZWNOdW0gPT09IDApIHsNCiAgICAgICAgICAgIHNlY3Rpb24gPSBib2R5V3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGUoJ2RpdicsIHsNCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzZWN0aW9uX2hlYWRlcl9ob2xkZXInLA0KICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfc2VjdGlvbl8nICsgKHNlY051bSsrKQ0KICAgICAgICAgICAgfSkpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIENyZWF0ZSBmaWVsZCBlbGVtZW50cyBhbmQgYXBwZW5kIHRvIGN1cnJlbnQgc2VjdGlvbg0KICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQoKGZpZWxkLndyYXBwZXIgPSBmaWVsZC50b05vZGUoKSkpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBjb25maWcuZnJhbWVTZWN0aW9uID0gc2VjdGlvbjsNCg0KICAgICAgICAvLyBBZGQgc2F2ZSBhbmQgY2xvc2UgYnV0dG9ucw0KICAgICAgICBib2R5V3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGUoJ2RpdicsDQogICAgICAgICAge2lkOiBjb25maWdJZCArICdfYnV0dG9uc19ob2xkZXInfSwNCg0KICAgICAgICAgIGNyZWF0ZSgnYnV0dG9uJywgew0KICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19zYXZlQnRuJywNCiAgICAgICAgICAgIHRleHRDb250ZW50OiAnU2F2ZScsDQogICAgICAgICAgICB0aXRsZTogJ1NhdmUgc2V0dGluZ3MnLA0KICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2F2ZWNsb3NlX2J1dHRvbnMnLA0KICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkgeyBjb25maWcuc2F2ZSgpOyB9DQogICAgICAgICAgfSksDQoNCiAgICAgICAgICBjcmVhdGUoJ2J1dHRvbicsIHsNCiAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfY2xvc2VCdG4nLA0KICAgICAgICAgICAgdGV4dENvbnRlbnQ6ICdDbG9zZScsDQogICAgICAgICAgICB0aXRsZTogJ0Nsb3NlIHdpbmRvdycsDQogICAgICAgICAgICBjbGFzc05hbWU6ICdzYXZlY2xvc2VfYnV0dG9ucycsDQogICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7IGNvbmZpZy5jbG9zZSgpOyB9DQogICAgICAgICAgfSksDQoNCiAgICAgICAgICBjcmVhdGUoJ2RpdicsDQogICAgICAgICAgICB7Y2xhc3NOYW1lOiAncmVzZXRfaG9sZGVyIGJsb2NrJ30sDQoNCiAgICAgICAgICAgIC8vIFJlc2V0IGxpbmsNCiAgICAgICAgICAgIGNyZWF0ZSgnYScsIHsNCiAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19yZXNldExpbmsnLA0KICAgICAgICAgICAgICB0ZXh0Q29udGVudDogJ1Jlc2V0IHRvIGRlZmF1bHRzJywNCiAgICAgICAgICAgICAgaHJlZjogJyMnLA0KICAgICAgICAgICAgICB0aXRsZTogJ1Jlc2V0IGZpZWxkcyB0byBkZWZhdWx0IHZhbHVlcycsDQogICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3Jlc2V0JywNCiAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24oZSkgeyBlLnByZXZlbnREZWZhdWx0KCk7IGNvbmZpZy5yZXNldCgpOyB9DQogICAgICAgICAgICB9KQ0KICAgICAgICApKSk7DQoNCiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChib2R5V3JhcHBlcik7IC8vIFBhaW50IGV2ZXJ5dGhpbmcgdG8gd2luZG93IGF0IG9uY2UNCiAgICAgICAgY29uZmlnLmNlbnRlcigpOyAvLyBTaG93IGFuZCBjZW50ZXIgaWZyYW1lDQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBjb25maWcuY2VudGVyLCBmYWxzZSk7IC8vIENlbnRlciBmcmFtZSBvbiByZXNpemUNCg0KICAgICAgICAvLyBDYWxsIHRoZSBvcGVuKCkgY2FsbGJhY2sgZnVuY3Rpb24NCiAgICAgICAgY29uZmlnLm9uT3Blbihjb25maWcuZnJhbWUuY29udGVudERvY3VtZW50IHx8IGNvbmZpZy5mcmFtZS5vd25lckRvY3VtZW50LA0KICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZS5jb250ZW50V2luZG93IHx8IHdpbmRvdywNCiAgICAgICAgICAgICAgICAgICAgICBjb25maWcuZnJhbWUpOw0KDQogICAgICAgIC8vIENsb3NlIGZyYW1lIG9uIHdpbmRvdyBjbG9zZQ0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY29uZmlnLmNsb3NlKCk7DQogICAgICAgIH0sIGZhbHNlKTsNCg0KICAgICAgICAvLyBOb3cgdGhhdCBldmVyeXRoaW5nIGlzIGxvYWRlZCwgbWFrZSBpdCB2aXNpYmxlDQogICAgICAgIGNvbmZpZy5mcmFtZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgY29uZmlnLmlzT3BlbiA9IHRydWU7DQogICAgICB9DQoNCiAgICAgIC8vIEVpdGhlciB1c2UgdGhlIGVsZW1lbnQgcGFzc2VkIHRvIGluaXQoKSBvciBjcmVhdGUgYW4gaWZyYW1lDQogICAgICBpZiAodGhpcy5mcmFtZSkgew0KICAgICAgICB0aGlzLmZyYW1lLmlkID0gdGhpcy5pZDsgLy8gQWxsb3dzIGZvciBwcmVmaXhpbmcgc3R5bGVzIHdpdGggdGhlIGNvbmZpZyBpZA0KICAgICAgICBpZiAodGhpcy5mcmFtZVN0eWxlKSB0aGlzLmZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCB0aGlzLmZyYW1lU3R5bGUpOw0KICAgICAgICBidWlsZENvbmZpZ1dpbih0aGlzLmZyYW1lLCB0aGlzLmZyYW1lLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyBDcmVhdGUgZnJhbWUNCiAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMuY3JlYXRlKCdpZnJhbWUnLCB7IGlkOiB0aGlzLmlkIH0pOw0KICAgICAgICBpZiAodGhpcy5mcmFtZVN0eWxlKSB0aGlzLmZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCB0aGlzLmZyYW1lU3R5bGUpOw0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZnJhbWUpOw0KDQogICAgICAgIC8vIEluIFdlYktpdCBzcmMgY2FuJ3QgYmUgc2V0IHVudGlsIGl0IGlzIGFkZGVkIHRvIHRoZSBwYWdlDQogICAgICAgIHRoaXMuZnJhbWUuc3JjID0gJyc7DQogICAgICAgIC8vIHdlIHdhaXQgZm9yIHRoZSBpZnJhbWUgdG8gbG9hZCBiZWZvcmUgd2UgY2FuIG1vZGlmeSBpdA0KICAgICAgICBsZXQgdGhhdCA9IHRoaXM7DQogICAgICAgIHRoaXMuZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICAgIGxldCBmcmFtZSA9IGNvbmZpZy5mcmFtZTsNCiAgICAgICAgICAgIGlmICghZnJhbWUuY29udGVudERvY3VtZW50KSB7DQogICAgICAgICAgICAgIHRoYXQubG9nKCJHTV9jb25maWcgZmFpbGVkIHRvIGluaXRpYWxpemUgZGVmYXVsdCBzZXR0aW5ncyBkaWFsb2cgbm9kZSEiKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGxldCBib2R5ID0gZnJhbWUuY29udGVudERvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07DQogICAgICAgICAgICAgIGJvZHkuaWQgPSBjb25maWcuaWQ7IC8vIEFsbG93cyBmb3IgcHJlZml4aW5nIHN0eWxlcyB3aXRoIHRoZSBjb25maWcgaWQNCiAgICAgICAgICAgICAgYnVpbGRDb25maWdXaW4oYm9keSwgZnJhbWUuY29udGVudERvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCBmYWxzZSk7DQogICAgICB9DQogICAgfSwNCg0KICAgIHNhdmU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMud3JpdGUobnVsbCwgbnVsbCwgKHZhbHMpID0+IHRoaXMub25TYXZlKHZhbHMpKTsNCiAgICB9LA0KDQogICAgY2xvc2U6IGZ1bmN0aW9uKCkgew0KICAgICAgLy8gSWYgZnJhbWUgaXMgYW4gaWZyYW1lIHRoZW4gcmVtb3ZlIGl0DQogICAgICBpZiAodGhpcy5mcmFtZSAmJiB0aGlzLmZyYW1lLmNvbnRlbnREb2N1bWVudCkgew0KICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLmZyYW1lKTsNCiAgICAgICAgdGhpcy5mcmFtZSA9IG51bGw7DQogICAgICB9IGVsc2UgaWYgKHRoaXMuZnJhbWUpIHsgLy8gZWxzZSB3aXBlIGl0cyBjb250ZW50DQogICAgICAgIHRoaXMuZnJhbWUuaW5uZXJIVE1MID0gIiI7DQogICAgICAgIHRoaXMuZnJhbWUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIH0NCg0KICAgICAgLy8gTnVsbCBvdXQgYWxsIHRoZSBmaWVsZHMgc28gd2UgZG9uJ3QgbGVhayBtZW1vcnkNCiAgICAgIGxldCBmaWVsZHMgPSB0aGlzLmZpZWxkczsNCiAgICAgIGZvciAobGV0IGlkIGluIGZpZWxkcykgew0KICAgICAgICBsZXQgZmllbGQgPSBmaWVsZHNbaWRdOw0KICAgICAgICBmaWVsZC53cmFwcGVyID0gbnVsbDsNCiAgICAgICAgZmllbGQubm9kZSA9IG51bGw7DQogICAgICB9DQoNCiAgICAgIHRoaXMub25DbG9zZSgpOyAvLyAgQ2FsbCB0aGUgY2xvc2UoKSBjYWxsYmFjayBmdW5jdGlvbg0KICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsNCiAgICB9LA0KDQogICAgc2V0OiBmdW5jdGlvbiAobmFtZSwgdmFsKSB7DQogICAgICB0aGlzLmZpZWxkc1tuYW1lXS52YWx1ZSA9IHZhbDsNCg0KICAgICAgaWYgKHRoaXMuZmllbGRzW25hbWVdLm5vZGUpIHsNCiAgICAgICAgdGhpcy5maWVsZHNbbmFtZV0ucmVsb2FkKCk7DQogICAgICB9DQogICAgfSwNCg0KICAgIGdldDogZnVuY3Rpb24gKG5hbWUsIGdldExpdmUpIHsNCiAgICAgIC8qIE1pZ3JhdGlvbiB3YXJuaW5nICovDQogICAgICBpZiAoIXRoaXMuaXNJbml0KSB7DQogICAgICAgIHRoaXMubG9nKCdHTV9jb25maWc6IGdldCBjYWxsZWQgYmVmb3JlIGluaXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vc2l6emxlbWN0d2l6emxlL0dNX2NvbmZpZy9pc3N1ZXMvMTEzJyk7DQogICAgICB9DQoNCiAgICAgIGxldCBmaWVsZCA9IHRoaXMuZmllbGRzW25hbWVdLA0KICAgICAgICAgIGZpZWxkVmFsID0gbnVsbDsNCg0KICAgICAgaWYgKGdldExpdmUgJiYgZmllbGQubm9kZSkgew0KICAgICAgICBmaWVsZFZhbCA9IGZpZWxkLnRvVmFsdWUoKTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIGZpZWxkVmFsICE9IG51bGwgPyBmaWVsZFZhbCA6IGZpZWxkLnZhbHVlOw0KICAgIH0sDQoNCiAgICB3cml0ZTogZnVuY3Rpb24gKHN0b3JlLCBvYmosIGNiKSB7DQogICAgICBsZXQgZm9yZ290dGVuID0gbnVsbCwNCiAgICAgICAgICB2YWx1ZXMgPSBudWxsOw0KICAgICAgaWYgKCFvYmopIHsNCiAgICAgICAgbGV0IGZpZWxkcyA9IHRoaXMuZmllbGRzOw0KDQogICAgICAgIHZhbHVlcyA9IHt9Ow0KICAgICAgICBmb3Jnb3R0ZW4gPSB7fTsNCg0KICAgICAgICBmb3IgKGxldCBpZCBpbiBmaWVsZHMpIHsNCiAgICAgICAgICBsZXQgZmllbGQgPSBmaWVsZHNbaWRdOw0KICAgICAgICAgIGxldCB2YWx1ZSA9IGZpZWxkLnRvVmFsdWUoKTsNCg0KICAgICAgICAgIGlmIChmaWVsZC5zYXZlKSB7DQogICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICB2YWx1ZXNbaWRdID0gdmFsdWU7DQogICAgICAgICAgICAgIGZpZWxkLnZhbHVlID0gdmFsdWU7DQogICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgdmFsdWVzW2lkXSA9IGZpZWxkLnZhbHVlOw0KICAgICAgICAgIH0gZWxzZQ0KICAgICAgICAgICAgZm9yZ290dGVuW2lkXSA9IHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IGZpZWxkLnZhbHVlOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIChhc3luYyAoKSA9PiB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgbGV0IHZhbCA9IHRoaXMuc3RyaW5naWZ5KG9iaiB8fCB2YWx1ZXMpOw0KICAgICAgICAgIGF3YWl0IHRoaXMuc2V0VmFsdWUoc3RvcmUgfHwgdGhpcy5pZCwgdmFsKTsNCiAgICAgICAgfSBjYXRjaChlKSB7DQogICAgICAgICAgdGhpcy5sb2coIkdNX2NvbmZpZyBmYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncyEiKTsNCiAgICAgICAgfQ0KICAgICAgICBjYihmb3Jnb3R0ZW4pOw0KICAgICAgfSkoKTsNCiAgICB9LA0KDQogICAgcmVhZDogZnVuY3Rpb24gKHN0b3JlLCBjYikgew0KICAgICAgKGFzeW5jICgpID0+IHsNCiAgICAgICAgbGV0IHZhbCA9IGF3YWl0IHRoaXMuZ2V0VmFsdWUoc3RvcmUgfHwgdGhpcy5pZCwgJ3t9Jyk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgbGV0IHJ2YWwgPSB0aGlzLnBhcnNlcih2YWwpOw0KICAgICAgICAgIGNiKHJ2YWwpOw0KICAgICAgICB9IGNhdGNoKGUpIHsNCiAgICAgICAgICB0aGlzLmxvZygiR01fY29uZmlnIGZhaWxlZCB0byByZWFkIHNhdmVkIHNldHRpbmdzISIpOw0KICAgICAgICAgIGNiKHt9KTsNCiAgICAgICAgfQ0KICAgICAgfSkoKTsNCiAgICB9LA0KDQogICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGxldCBmaWVsZHMgPSB0aGlzLmZpZWxkczsNCg0KICAgICAgLy8gUmVzZXQgYWxsIHRoZSBmaWVsZHMNCiAgICAgIGZvciAobGV0IGlkIGluIGZpZWxkcykgeyBmaWVsZHNbaWRdLnJlc2V0KCk7IH0NCg0KICAgICAgdGhpcy5vblJlc2V0KCk7IC8vIENhbGwgdGhlIHJlc2V0KCkgY2FsbGJhY2sgZnVuY3Rpb24NCiAgICB9LA0KDQogICAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7DQogICAgICBsZXQgQSA9IG51bGwsDQogICAgICAgICAgQiA9IG51bGw7DQogICAgICBzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCkgew0KICAgICAgICBjYXNlIDE6DQogICAgICAgICAgQSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGFyZ3VtZW50c1swXSk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgQSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYXJndW1lbnRzWzBdKTsNCiAgICAgICAgICBCID0gYXJndW1lbnRzWzFdOw0KICAgICAgICAgIGZvciAobGV0IGIgaW4gQikgew0KICAgICAgICAgICAgaWYgKGIuaW5kZXhPZigib24iKSA9PSAwKQ0KICAgICAgICAgICAgICBBLmFkZEV2ZW50TGlzdGVuZXIoYi5zdWJzdHJpbmcoMiksIEJbYl0sIGZhbHNlKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKCIsc3R5bGUsYWNjZXNza2V5LGlkLG5hbWUsc3JjLGhyZWYsd2hpY2gsZm9yIi5pbmRleE9mKCIsIiArDQogICAgICAgICAgICAgICAgICAgICBiLnRvTG93ZXJDYXNlKCkpICE9IC0xKQ0KICAgICAgICAgICAgICBBLnNldEF0dHJpYnV0ZShiLCBCW2JdKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgQVtiXSA9IEJbYl07DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzJdID09ICJzdHJpbmciKQ0KICAgICAgICAgICAgQS5pbm5lckhUTUwgPSBhcmd1bWVudHNbMl07DQogICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDIsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47ICsraSkNCiAgICAgICAgICAgICAgQS5hcHBlbmRDaGlsZChhcmd1bWVudHNbaV0pOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIEE7DQogICAgfSwNCg0KICAgIGNlbnRlcjogZnVuY3Rpb24gKCkgew0KICAgICAgbGV0IG5vZGUgPSB0aGlzLmZyYW1lOw0KICAgICAgaWYgKCFub2RlKSByZXR1cm47DQogICAgICBsZXQgc3R5bGUgPSBub2RlLnN0eWxlLA0KICAgICAgICAgIGJlZm9yZU9wYWNpdHkgPSBzdHlsZS5vcGFjaXR5Ow0KICAgICAgaWYgKHN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKSBzdHlsZS5vcGFjaXR5ID0gJzAnOw0KICAgICAgc3R5bGUuZGlzcGxheSA9ICcnOw0KICAgICAgc3R5bGUudG9wID0gTWF0aC5mbG9vcigod2luZG93LmlubmVySGVpZ2h0IC8gMikgLSAobm9kZS5vZmZzZXRIZWlnaHQgLyAyKSkgKyAncHgnOw0KICAgICAgc3R5bGUubGVmdCA9IE1hdGguZmxvb3IoKHdpbmRvdy5pbm5lcldpZHRoIC8gMikgLSAobm9kZS5vZmZzZXRXaWR0aCAvIDIpKSArICdweCc7DQogICAgICBzdHlsZS5vcGFjaXR5ID0gJzEnOw0KICAgIH0sDQoNCiAgICByZW1vdmU6IGZ1bmN0aW9uIChlbCkgew0KICAgICAgaWYgKGVsICYmIGVsLnBhcmVudE5vZGUpIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpOw0KICAgIH0NCiAgfTsNCg0KICBjb25zdHJ1Y3QucHJvdG90eXBlLm5hbWUgPSAnR01fY29uZmlnJzsNCiAgY29uc3RydWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdDsNCiAgbGV0IGlzR000ID0gdHlwZW9mIEdNLmdldFZhbHVlICE9PSAndW5kZWZpbmVkJyAmJg0KICAgIHR5cGVvZiBHTS5zZXRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCc7DQogIGxldCBpc0dNID0gaXNHTTQgfHwgKHR5cGVvZiBHTV9nZXRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiYNCiAgICB0eXBlb2YgR01fZ2V0VmFsdWUoJ2EnLCAnYicpICE9PSAndW5kZWZpbmVkJyk7DQogIGNvbnN0cnVjdC5wcm90b3R5cGUuaXNHTSA9IGlzR007DQoNCiAgaWYgKCFpc0dNNCkgew0KICAgIGxldCBwcm9taXNpZnkgPSAob2xkKSA9PiAoLi4uYXJncykgPT4gew0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICByZXNvbHZlKG9sZC5hcHBseSh0aGlzLCBhcmdzKSk7DQogICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICByZWplY3QoZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH07DQoNCiAgICBsZXQgZ2V0VmFsdWUgPSBpc0dNID8gR01fZ2V0VmFsdWUNCiAgICAgIDogKG5hbWUsIGRlZikgPT4gew0KICAgICAgICBsZXQgcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpOw0KICAgICAgICByZXR1cm4gcyAhPT0gbnVsbCA/IHMgOiBkZWY7DQogICAgICB9Ow0KICAgIGxldCBzZXRWYWx1ZSA9IGlzR00gPyBHTV9zZXRWYWx1ZQ0KICAgICAgOiAobmFtZSwgdmFsdWUpID0+IGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlKTsNCiAgICBsZXQgbG9nID0gdHlwZW9mIEdNX2xvZyAhPT0gJ3VuZGVmaW5lZCcgPyBHTV9sb2cgOiBjb25zb2xlLmxvZzsNCg0KICAgIEdNLmdldFZhbHVlID0gcHJvbWlzaWZ5KGdldFZhbHVlKTsNCiAgICBHTS5zZXRWYWx1ZSA9IHByb21pc2lmeShzZXRWYWx1ZSk7DQogICAgR00ubG9nID0gcHJvbWlzaWZ5KGxvZyk7DQogIH0NCg0KICBjb25zdHJ1Y3QucHJvdG90eXBlLnN0cmluZ2lmeSA9IEpTT04uc3RyaW5naWZ5Ow0KICBjb25zdHJ1Y3QucHJvdG90eXBlLnBhcnNlciA9IEpTT04ucGFyc2U7DQogIGNvbnN0cnVjdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBHTS5nZXRWYWx1ZTsNCiAgY29uc3RydWN0LnByb3RvdHlwZS5zZXRWYWx1ZSA9IEdNLnNldFZhbHVlOw0KICBjb25zdHJ1Y3QucHJvdG90eXBlLmxvZyA9IEdNLmxvZyB8fCBjb25zb2xlLmxvZzsNCg0KICAvLyBQYXNzdGhyb3VnaCBmcm9udGVuZHMgZm9yIG5ldyBhbmQgb2xkIHVzYWdlDQogIGxldCBjb25maWcgPSBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIG5ldyAoY29uZmlnLmJpbmQuYXBwbHkoY29uc3RydWN0LA0KICAgICAgW251bGxdLmNvbmNhdChBcnJheS5mcm9tKGFyZ3VtZW50cykpKSk7DQogIH07DQogIGNvbmZpZy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjb25maWc7DQoNCiAgLy8gU3VwcG9ydCBvbGQgbWV0aG9kIG9mIGluaXRhbGl6aW5nDQogIGNvbmZpZy5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgIEdNX2NvbmZpZyA9IGNvbmZpZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIEdNX2NvbmZpZy5pbml0ID0gZnVuY3Rpb24oKSB7DQogICAgICBHTV9jb25maWdJbml0KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgfTsNCiAgfTsNCg0KICAvLyBSZXVzYWJsZSBmdW5jdGlvbnMgYW5kIHByb3BlcnRpZXMNCiAgLy8gVXNhYmxlIHZpYSBHTV9jb25maWcuKg0KICBjb25maWcuY3JlYXRlID0gY29uc3RydWN0LnByb3RvdHlwZS5jcmVhdGU7DQogIGNvbmZpZy5pc0dNID0gY29uc3RydWN0LnByb3RvdHlwZS5pc0dNOw0KICBjb25maWcuc2V0VmFsdWUgPSBjb25zdHJ1Y3QucHJvdG90eXBlLnNldFZhbHVlOw0KICBjb25maWcuZ2V0VmFsdWUgPSBjb25zdHJ1Y3QucHJvdG90eXBlLmdldFZhbHVlOw0KICBjb25maWcuc3RyaW5naWZ5ID0gY29uc3RydWN0LnByb3RvdHlwZS5zdHJpbmdpZnk7DQogIGNvbmZpZy5wYXJzZXIgPSBjb25zdHJ1Y3QucHJvdG90eXBlLnBhcnNlcjsNCiAgY29uZmlnLmxvZyA9IGNvbnN0cnVjdC5wcm90b3R5cGUubG9nOw0KICBjb25maWcucmVtb3ZlID0gY29uc3RydWN0LnByb3RvdHlwZS5yZW1vdmU7DQogIGNvbmZpZy5yZWFkID0gY29uc3RydWN0LnByb3RvdHlwZS5yZWFkLmJpbmQoY29uZmlnKTsNCiAgY29uZmlnLndyaXRlID0gY29uc3RydWN0LnByb3RvdHlwZS53cml0ZS5iaW5kKGNvbmZpZyk7DQoNCiAgcmV0dXJuIGNvbmZpZzsNCn0odHlwZW9mIEdNID09PSAnb2JqZWN0JyA/IEdNIDogT2JqZWN0LmNyZWF0ZShudWxsKSkpOw0KbGV0IEdNX2NvbmZpZ1N0cnVjdCA9IEdNX2NvbmZpZzsNCg0KZnVuY3Rpb24gR01fY29uZmlnRmllbGQoc2V0dGluZ3MsIHN0b3JlZCwgaWQsIGN1c3RvbVR5cGUsIGNvbmZpZ0lkKSB7DQogIC8vIFN0b3JlIHRoZSBmaWVsZCdzIHNldHRpbmdzDQogIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5nczsNCiAgdGhpcy5pZCA9IGlkOw0KICB0aGlzLmNvbmZpZ0lkID0gY29uZmlnSWQ7DQogIHRoaXMubm9kZSA9IG51bGw7DQogIHRoaXMud3JhcHBlciA9IG51bGw7DQogIHRoaXMuc2F2ZSA9IHR5cGVvZiBzZXR0aW5ncy5zYXZlID09ICJ1bmRlZmluZWQiID8gdHJ1ZSA6IHNldHRpbmdzLnNhdmU7DQoNCiAgLy8gQnV0dG9ucyBhcmUgc3RhdGljIGFuZCBkb24ndCBoYXZlIGEgc3RvcmVkIHZhbHVlDQogIGlmIChzZXR0aW5ncy50eXBlID09ICJidXR0b24iKSB0aGlzLnNhdmUgPSBmYWxzZTsNCg0KICAvLyBpZiBhIGRlZmF1bHQgdmFsdWUgd2Fzbid0IHBhc3NlZCB0aHJvdWdoIGluaXQoKSB0aGVuDQogIC8vICAgaWYgdGhlIHR5cGUgaXMgY3VzdG9tIHVzZSBpdHMgZGVmYXVsdCB2YWx1ZQ0KICAvLyAgIGVsc2UgdXNlIGRlZmF1bHQgdmFsdWUgZm9yIHR5cGUNCiAgLy8gZWxzZSB1c2UgdGhlIGRlZmF1bHQgdmFsdWUgcGFzc2VkIHRocm91Z2ggaW5pdCgpDQogIHRoaXNbJ2RlZmF1bHQnXSA9IHR5cGVvZiBzZXR0aW5nc1snZGVmYXVsdCddID09ICJ1bmRlZmluZWQiID8NCiAgICBjdXN0b21UeXBlID8NCiAgICAgIGN1c3RvbVR5cGVbJ2RlZmF1bHQnXQ0KICAgICAgOiB0aGlzLmRlZmF1bHRWYWx1ZShzZXR0aW5ncy50eXBlLCBzZXR0aW5ncy5vcHRpb25zKQ0KICAgIDogc2V0dGluZ3NbJ2RlZmF1bHQnXTsNCg0KICAvLyBTdG9yZSB0aGUgZmllbGQncyB2YWx1ZQ0KICB0aGlzLnZhbHVlID0gdHlwZW9mIHN0b3JlZCA9PSAidW5kZWZpbmVkIiA/IHRoaXNbJ2RlZmF1bHQnXSA6IHN0b3JlZDsNCg0KICAvLyBTZXR1cCBtZXRob2RzIGZvciBhIGN1c3RvbSB0eXBlDQogIGlmIChjdXN0b21UeXBlKSB7DQogICAgdGhpcy50b05vZGUgPSBjdXN0b21UeXBlLnRvTm9kZTsNCiAgICB0aGlzLnRvVmFsdWUgPSBjdXN0b21UeXBlLnRvVmFsdWU7DQogICAgdGhpcy5yZXNldCA9IGN1c3RvbVR5cGUucmVzZXQ7DQogIH0NCn0NCg0KR01fY29uZmlnRmllbGQucHJvdG90eXBlID0gew0KICBjcmVhdGU6IEdNX2NvbmZpZy5jcmVhdGUsDQoNCiAgZGVmYXVsdFZhbHVlOiBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7DQogICAgbGV0IHZhbHVlOw0KDQogICAgaWYgKHR5cGUuaW5kZXhPZigndW5zaWduZWQgJykgPT0gMCkNCiAgICAgIHR5cGUgPSB0eXBlLnN1YnN0cmluZyg5KTsNCg0KICAgIHN3aXRjaCAodHlwZSkgew0KICAgICAgY2FzZSAncmFkaW8nOiBjYXNlICdzZWxlY3QnOg0KICAgICAgICB2YWx1ZSA9IG9wdGlvbnNbMF07DQogICAgICAgIGJyZWFrOw0KICAgICAgY2FzZSAnY2hlY2tib3gnOg0KICAgICAgICB2YWx1ZSA9IGZhbHNlOw0KICAgICAgICBicmVhazsNCiAgICAgIGNhc2UgJ2ludCc6IGNhc2UgJ2ludGVnZXInOg0KICAgICAgY2FzZSAnZmxvYXQnOiBjYXNlICdudW1iZXInOg0KICAgICAgICB2YWx1ZSA9IDA7DQogICAgICAgIGJyZWFrOw0KICAgICAgZGVmYXVsdDoNCiAgICAgICAgdmFsdWUgPSAnJzsNCiAgICB9DQoNCiAgICByZXR1cm4gdmFsdWU7DQogIH0sDQoNCiAgdG9Ob2RlOiBmdW5jdGlvbigpIHsNCiAgICBsZXQgZmllbGQgPSB0aGlzLnNldHRpbmdzLA0KICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWUsDQogICAgICAgIG9wdGlvbnMgPSBmaWVsZC5vcHRpb25zLA0KICAgICAgICB0eXBlID0gZmllbGQudHlwZSwNCiAgICAgICAgaWQgPSB0aGlzLmlkLA0KICAgICAgICBjb25maWdJZCA9IHRoaXMuY29uZmlnSWQsDQogICAgICAgIGxhYmVsUG9zID0gZmllbGQubGFiZWxQb3MsDQogICAgICAgIGNyZWF0ZSA9IHRoaXMuY3JlYXRlOw0KDQogICAgZnVuY3Rpb24gYWRkTGFiZWwocG9zLCBsYWJlbEVsLCBwYXJlbnROb2RlLCBiZWZvcmVFbCkgew0KICAgICAgaWYgKCFiZWZvcmVFbCkgYmVmb3JlRWwgPSBwYXJlbnROb2RlLmZpcnN0Q2hpbGQ7DQogICAgICBzd2l0Y2ggKHBvcykgew0KICAgICAgICBjYXNlICdyaWdodCc6IGNhc2UgJ2JlbG93JzoNCiAgICAgICAgICBpZiAocG9zID09ICdiZWxvdycpDQogICAgICAgICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKGNyZWF0ZSgnYnInLCB7fSkpOw0KICAgICAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobGFiZWxFbCk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgaWYgKHBvcyA9PSAnYWJvdmUnKQ0KICAgICAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY3JlYXRlKCdicicsIHt9KSwgYmVmb3JlRWwpOw0KICAgICAgICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGxhYmVsRWwsIGJlZm9yZUVsKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBsZXQgcmV0Tm9kZSA9IGNyZWF0ZSgnZGl2JywgeyBjbGFzc05hbWU6ICdjb25maWdfdmFyJywNCiAgICAgICAgICBpZDogY29uZmlnSWQgKyAnXycgKyBpZCArICdfdmFyJywNCiAgICAgICAgICB0aXRsZTogZmllbGQudGl0bGUgfHwgJycgfSksDQogICAgICAgIGZpcnN0UHJvcDsNCg0KICAgIC8vIFJldHJpZXZlIHRoZSBmaXJzdCBwcm9wDQogICAgZm9yIChsZXQgaSBpbiBmaWVsZCkgeyBmaXJzdFByb3AgPSBpOyBicmVhazsgfQ0KDQogICAgbGV0IGxhYmVsID0gZmllbGQubGFiZWwgJiYgdHlwZSAhPSAiYnV0dG9uIiA/DQogICAgICBjcmVhdGUoJ2xhYmVsJywgew0KICAgICAgICBpZDogY29uZmlnSWQgKyAnXycgKyBpZCArICdfZmllbGRfbGFiZWwnLA0KICAgICAgICBmb3I6IGNvbmZpZ0lkICsgJ19maWVsZF8nICsgaWQsDQogICAgICAgIGNsYXNzTmFtZTogJ2ZpZWxkX2xhYmVsJw0KICAgICAgfSwgZmllbGQubGFiZWwpIDogbnVsbDsNCg0KICAgIGxldCB3cmFwID0gbnVsbDsNCiAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgIGNhc2UgJ3RleHRhcmVhJzoNCiAgICAgICAgcmV0Tm9kZS5hcHBlbmRDaGlsZCgodGhpcy5ub2RlID0gY3JlYXRlKCd0ZXh0YXJlYScsIHsNCiAgICAgICAgICBpbm5lckhUTUw6IHZhbHVlLA0KICAgICAgICAgIGlkOiBjb25maWdJZCArICdfZmllbGRfJyArIGlkLA0KICAgICAgICAgIGNsYXNzTmFtZTogJ2Jsb2NrJywNCiAgICAgICAgICBjb2xzOiAoZmllbGQuY29scyA/IGZpZWxkLmNvbHMgOiAyMCksDQogICAgICAgICAgcm93czogKGZpZWxkLnJvd3MgPyBmaWVsZC5yb3dzIDogMikNCiAgICAgICAgfSkpKTsNCiAgICAgICAgYnJlYWs7DQogICAgICBjYXNlICdyYWRpbyc6DQogICAgICAgIHdyYXAgPSBjcmVhdGUoJ2RpdicsIHsNCiAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX2ZpZWxkXycgKyBpZA0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5ub2RlID0gd3JhcDsNCg0KICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gb3B0aW9ucy5sZW5ndGg7IGkgPCBsZW47ICsraSkgew0KICAgICAgICAgIGxldCByYWRMYWJlbCA9IGNyZWF0ZSgnbGFiZWwnLCB7DQogICAgICAgICAgICBjbGFzc05hbWU6ICdyYWRpb19sYWJlbCcNCiAgICAgICAgICB9LCBvcHRpb25zW2ldKTsNCg0KICAgICAgICAgIGxldCByYWQgPSB3cmFwLmFwcGVuZENoaWxkKGNyZWF0ZSgnaW5wdXQnLCB7DQogICAgICAgICAgICB2YWx1ZTogb3B0aW9uc1tpXSwNCiAgICAgICAgICAgIHR5cGU6ICdyYWRpbycsDQogICAgICAgICAgICBuYW1lOiBpZCwNCiAgICAgICAgICAgIGNoZWNrZWQ6IG9wdGlvbnNbaV0gPT0gdmFsdWUNCiAgICAgICAgICB9KSk7DQoNCiAgICAgICAgICBsZXQgcmFkTGFiZWxQb3MgPSBsYWJlbFBvcyAmJg0KICAgICAgICAgICAgKGxhYmVsUG9zID09ICdsZWZ0JyB8fCBsYWJlbFBvcyA9PSAncmlnaHQnKSA/DQogICAgICAgICAgICBsYWJlbFBvcyA6IGZpcnN0UHJvcCA9PSAnb3B0aW9ucycgPyAnbGVmdCcgOiAncmlnaHQnOw0KDQogICAgICAgICAgYWRkTGFiZWwocmFkTGFiZWxQb3MsIHJhZExhYmVsLCB3cmFwLCByYWQpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0Tm9kZS5hcHBlbmRDaGlsZCh3cmFwKTsNCiAgICAgICAgYnJlYWs7DQogICAgICBjYXNlICdzZWxlY3QnOg0KICAgICAgICB3cmFwID0gY3JlYXRlKCdzZWxlY3QnLCB7DQogICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19maWVsZF8nICsgaWQNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMubm9kZSA9IHdyYXA7DQoNCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9wdGlvbnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICBsZXQgb3B0aW9uID0gb3B0aW9uc1tpXTsNCiAgICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGNyZWF0ZSgnb3B0aW9uJywgew0KICAgICAgICAgICAgdmFsdWU6IG9wdGlvbiwNCiAgICAgICAgICAgIHNlbGVjdGVkOiBvcHRpb24gPT0gdmFsdWUNCiAgICAgICAgICB9LCBvcHRpb24pKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldE5vZGUuYXBwZW5kQ2hpbGQod3JhcCk7DQogICAgICAgIGJyZWFrOw0KICAgICAgZGVmYXVsdDogLy8gZmllbGRzIHVzaW5nIGlucHV0IGVsZW1lbnRzDQogICAgICAgIGxldCBwcm9wcyA9IHsNCiAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX2ZpZWxkXycgKyBpZCwNCiAgICAgICAgICB0eXBlOiB0eXBlLA0KICAgICAgICAgIHZhbHVlOiB0eXBlID09ICdidXR0b24nID8gZmllbGQubGFiZWwgOiB2YWx1ZQ0KICAgICAgICB9Ow0KDQogICAgICAgIHN3aXRjaCAodHlwZSkgew0KICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzoNCiAgICAgICAgICAgIHByb3BzLmNoZWNrZWQgPSB2YWx1ZTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgJ2J1dHRvbic6DQogICAgICAgICAgICBwcm9wcy5zaXplID0gZmllbGQuc2l6ZSA/IGZpZWxkLnNpemUgOiAyNTsNCiAgICAgICAgICAgIGlmIChmaWVsZC5zY3JpcHQpIGZpZWxkLmNsaWNrID0gZmllbGQuc2NyaXB0Ow0KICAgICAgICAgICAgaWYgKGZpZWxkLmNsaWNrKSBwcm9wcy5vbmNsaWNrID0gZmllbGQuY2xpY2s7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICBjYXNlICdoaWRkZW4nOg0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgIC8vIHR5cGUgPSB0ZXh0LCBpbnQsIG9yIGZsb2F0DQogICAgICAgICAgICBwcm9wcy50eXBlID0gJ3RleHQnOw0KICAgICAgICAgICAgcHJvcHMuc2l6ZSA9IGZpZWxkLnNpemUgPyBmaWVsZC5zaXplIDogMjU7DQogICAgICAgIH0NCg0KICAgICAgICByZXROb2RlLmFwcGVuZENoaWxkKCh0aGlzLm5vZGUgPSBjcmVhdGUoJ2lucHV0JywgcHJvcHMpKSk7DQogICAgfQ0KDQogICAgaWYgKGxhYmVsKSB7DQogICAgICAvLyBJZiB0aGUgbGFiZWwgaXMgcGFzc2VkIGZpcnN0LCBpbnNlcnQgaXQgYmVmb3JlIHRoZSBmaWVsZA0KICAgICAgLy8gZWxzZSBpbnNlcnQgaXQgYWZ0ZXINCiAgICAgIGlmICghbGFiZWxQb3MpDQogICAgICAgIGxhYmVsUG9zID0gZmlyc3RQcm9wID09ICJsYWJlbCIgfHwgdHlwZSA9PSAicmFkaW8iID8NCiAgICAgICAgICAibGVmdCIgOiAicmlnaHQiOw0KDQogICAgICBhZGRMYWJlbChsYWJlbFBvcywgbGFiZWwsIHJldE5vZGUpOw0KICAgIH0NCg0KICAgIHJldHVybiByZXROb2RlOw0KICB9LA0KDQogIHRvVmFsdWU6IGZ1bmN0aW9uKCkgew0KICAgIGxldCBub2RlID0gdGhpcy5ub2RlLA0KICAgICAgICBmaWVsZCA9IHRoaXMuc2V0dGluZ3MsDQogICAgICAgIHR5cGUgPSBmaWVsZC50eXBlLA0KICAgICAgICB1bnNpZ25lZCA9IGZhbHNlLA0KICAgICAgICBydmFsID0gbnVsbDsNCg0KICAgIGlmICghbm9kZSkgcmV0dXJuIHJ2YWw7DQoNCiAgICBpZiAodHlwZS5pbmRleE9mKCd1bnNpZ25lZCAnKSA9PSAwKSB7DQogICAgICB0eXBlID0gdHlwZS5zdWJzdHJpbmcoOSk7DQogICAgICB1bnNpZ25lZCA9IHRydWU7DQogICAgfQ0KDQogICAgc3dpdGNoICh0eXBlKSB7DQogICAgICBjYXNlICdjaGVja2JveCc6DQogICAgICAgIHJ2YWwgPSBub2RlLmNoZWNrZWQ7DQogICAgICAgIGJyZWFrOw0KICAgICAgY2FzZSAnc2VsZWN0JzoNCiAgICAgICAgcnZhbCA9IG5vZGVbbm9kZS5zZWxlY3RlZEluZGV4XS52YWx1ZTsNCiAgICAgICAgYnJlYWs7DQogICAgICBjYXNlICdyYWRpbyc6DQogICAgICAgIGxldCByYWRpb3MgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpOw0KICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gcmFkaW9zLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAgICAgaWYgKHJhZGlvc1tpXS5jaGVja2VkKQ0KICAgICAgICAgICAgcnZhbCA9IHJhZGlvc1tpXS52YWx1ZTsNCiAgICAgICAgfQ0KICAgICAgICBicmVhazsNCiAgICAgIGNhc2UgJ2J1dHRvbic6DQogICAgICAgIGJyZWFrOw0KICAgICAgY2FzZSAnaW50JzogY2FzZSAnaW50ZWdlcic6DQogICAgICBjYXNlICdmbG9hdCc6IGNhc2UgJ251bWJlcic6DQogICAgICAgIGxldCBudW0gPSBOdW1iZXIobm9kZS52YWx1ZSk7DQogICAgICAgIGxldCB3YXJuID0gJ0ZpZWxkIGxhYmVsZWQgIicgKyBmaWVsZC5sYWJlbCArICciIGV4cGVjdHMgYScgKw0KICAgICAgICAgICh1bnNpZ25lZCA/ICcgcG9zaXRpdmUgJyA6ICduICcpICsgJ2ludGVnZXIgdmFsdWUnOw0KDQogICAgICAgIGlmIChpc05hTihudW0pIHx8ICh0eXBlLnN1YnN0cigwLCAzKSA9PSAnaW50JyAmJg0KICAgICAgICAgICAgTWF0aC5jZWlsKG51bSkgIT0gTWF0aC5mbG9vcihudW0pKSB8fA0KICAgICAgICAgICAgKHVuc2lnbmVkICYmIG51bSA8IDApKSB7DQogICAgICAgICAgYWxlcnQod2FybiArICcuJyk7DQogICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIXRoaXMuX2NoZWNrTnVtYmVyUmFuZ2UobnVtLCB3YXJuKSkNCiAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgcnZhbCA9IG51bTsNCiAgICAgICAgYnJlYWs7DQogICAgICBkZWZhdWx0Og0KICAgICAgICBydmFsID0gbm9kZS52YWx1ZTsNCiAgICAgICAgYnJlYWs7DQogICAgfQ0KDQogICAgcmV0dXJuIHJ2YWw7IC8vIHZhbHVlIHJlYWQgc3VjY2Vzc2Z1bGx5DQogIH0sDQoNCiAgcmVzZXQ6IGZ1bmN0aW9uKCkgew0KICAgIGxldCBub2RlID0gdGhpcy5ub2RlLA0KICAgICAgICBmaWVsZCA9IHRoaXMuc2V0dGluZ3MsDQogICAgICAgIHR5cGUgPSBmaWVsZC50eXBlOw0KDQogICAgaWYgKCFub2RlKSByZXR1cm47DQoNCiAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgIGNhc2UgJ2NoZWNrYm94JzoNCiAgICAgICAgbm9kZS5jaGVja2VkID0gdGhpc1snZGVmYXVsdCddOw0KICAgICAgICBicmVhazsNCiAgICAgIGNhc2UgJ3NlbGVjdCc6DQogICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2RlLm9wdGlvbnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsNCiAgICAgICAgICBpZiAobm9kZS5vcHRpb25zW2ldLnRleHRDb250ZW50ID09IHRoaXNbJ2RlZmF1bHQnXSkNCiAgICAgICAgICAgIG5vZGUuc2VsZWN0ZWRJbmRleCA9IGk7DQogICAgICAgIH0NCiAgICAgICAgYnJlYWs7DQogICAgICBjYXNlICdyYWRpbyc6DQogICAgICAgIGxldCByYWRpb3MgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpOw0KICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gcmFkaW9zLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7DQogICAgICAgICAgaWYgKHJhZGlvc1tpXS52YWx1ZSA9PSB0aGlzWydkZWZhdWx0J10pDQogICAgICAgICAgICByYWRpb3NbaV0uY2hlY2tlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgYnJlYWs7DQogICAgICBjYXNlICdidXR0b24nIDoNCiAgICAgICAgYnJlYWs7DQogICAgICBkZWZhdWx0Og0KICAgICAgICBub2RlLnZhbHVlID0gdGhpc1snZGVmYXVsdCddOw0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgfSwNCg0KICByZW1vdmU6IGZ1bmN0aW9uKCkgew0KICAgIEdNX2NvbmZpZy5yZW1vdmUodGhpcy53cmFwcGVyKTsNCiAgICB0aGlzLndyYXBwZXIgPSBudWxsOw0KICAgIHRoaXMubm9kZSA9IG51bGw7DQogIH0sDQoNCiAgcmVsb2FkOiBmdW5jdGlvbigpIHsNCiAgICBsZXQgd3JhcHBlciA9IHRoaXMud3JhcHBlcjsNCiAgICBpZiAod3JhcHBlcikgew0KICAgICAgbGV0IGZpZWxkUGFyZW50ID0gd3JhcHBlci5wYXJlbnROb2RlOw0KICAgICAgbGV0IG5ld1dyYXBwZXIgPSB0aGlzLnRvTm9kZSgpOw0KICAgICAgZmllbGRQYXJlbnQuaW5zZXJ0QmVmb3JlKG5ld1dyYXBwZXIsIHdyYXBwZXIpOw0KICAgICAgR01fY29uZmlnLnJlbW92ZSh0aGlzLndyYXBwZXIpOw0KICAgICAgdGhpcy53cmFwcGVyID0gbmV3V3JhcHBlcjsNCiAgICB9DQogIH0sDQoNCiAgX2NoZWNrTnVtYmVyUmFuZ2U6IGZ1bmN0aW9uKG51bSwgd2Fybikgew0KICAgIGxldCBmaWVsZCA9IHRoaXMuc2V0dGluZ3M7DQogICAgaWYgKHR5cGVvZiBmaWVsZC5taW4gPT0gIm51bWJlciIgJiYgbnVtIDwgZmllbGQubWluKSB7DQogICAgICBhbGVydCh3YXJuICsgJyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJyArIGZpZWxkLm1pbiArICcuJyk7DQogICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQoNCiAgICBpZiAodHlwZW9mIGZpZWxkLm1heCA9PSAibnVtYmVyIiAmJiBudW0gPiBmaWVsZC5tYXgpIHsNCiAgICAgIGFsZXJ0KHdhcm4gKyAnIGxlc3MgdGhhbiBvciBlcXVhbCB0byAnICsgZmllbGQubWF4ICsgJy4nKTsNCiAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KfTsNCg=="
                }
            ]
        },
        {
            "name": "YouTube: Hide LONG Videos",
            "options":
            {
                "check_for_updates": true,
                "user_modified": null,
                "comment": null,
                "compatopts_for_requires": true,
                "compat_wrappedjsobject": false,
                "compat_metadata": false,
                "compat_foreach": false,
                "compat_powerful_this": null,
                "sandbox": null,
                "noframes": null,
                "unwrap": null,
                "run_at": null,
                "tab_types": null,
                "override":
                {
                    "use_includes":
                    [],
                    "orig_includes":
                    [],
                    "merge_includes": true,
                    "use_matches":
                    [],
                    "orig_matches":
                    [
                        "https://*.youtube.com/*",
                        "https://youtube.com/*"
                    ],
                    "merge_matches": true,
                    "use_excludes":
                    [],
                    "orig_excludes":
                    [],
                    "merge_excludes": true,
                    "use_connects":
                    [],
                    "orig_connects":
                    [],
                    "merge_connects": true,
                    "use_blockers":
                    [],
                    "orig_run_at": "document-idle",
                    "orig_noframes": true
                }
            },
            "storage":
            {
                "ts": 1717338755736,
                "data":
                {}
            },
            "enabled": true,
            "position": 2,
            "file_url": "https://source.garden/scripts/yt-hide-long/raw/branch/latest/script.user.js",
            "uuid": "8468d1fe-15ad-48f1-87ce-6c53fd8f927c",
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUJCVlvdVR1YmU6IEhpZGUgTE9ORyBWaWRlb3MKLy8gQG5hbWVzcGFjZQlodHRwczovL3NvdXJjZS5nYXJkZW4KLy8gQHZlcnNpb24JCTEuMAovLyBAbGljZW5zZQkJQ0MwCi8vIEBkZXNjcmlwdGlvbglIaWRlIExPTkcgKG92ZXIgMjowMDowMCDigJMgdHdvIGhvdXJzKSB2aWRlb3Mgb24gWW91VHViZSdzIHBhZ2VzCi8vIEBhdXRob3IJCUR5bSBTb2hpbiA8cmVAZHltLnNoPgovLyBAbWF0Y2gJCWh0dHBzOi8vKi55b3V0dWJlLmNvbS8qCi8vIEBtYXRjaAkJaHR0cHM6Ly95b3V0dWJlLmNvbS8qCi8vIEBub2ZyYW1lcwovLyBAZG93bmxvYWRVUkwJaHR0cHM6Ly9zb3VyY2UuZ2FyZGVuL3NjcmlwdHMveXQtaGlkZS1sb25nL3Jhdy9icmFuY2gvbGF0ZXN0L3NjcmlwdC51c2VyLmpzCi8vIEB1cGRhdGVVUkwJaHR0cHM6Ly9zb3VyY2UuZ2FyZGVuL3NjcmlwdHMveXQtaGlkZS1sb25nL3Jhdy9icmFuY2gvbGF0ZXN0L3NjcmlwdC5tZXRhLmpzCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewoJJ3VzZSBzdHJpY3QnCgoJZnVuY3Rpb24gcmVtb3ZlVXBjb21pbmdWaWRlb3MoKXsKCQlkb2N1bWVudAoJCQkucXVlcnlTZWxlY3RvckFsbCggYHl0ZC1pdGVtLXNlY3Rpb24tcmVuZGVyZXJgICkKCQkJLmZvckVhY2goIGUgPT4KCQkJewoJCQkJY29uc3QgaXNfbG9uZyA9IGUucXVlcnlTZWxlY3RvciggYGJhZGdlLXNoYXBlW2FyaWEtbGFiZWwqPSJob3VycywiXWAgKQoJCQkJaWYoIGlzX2xvbmcgKQoJCQkJewoJCQkJCWUuc3R5bGUuZGlzcGxheSA9ICdub25lJwoJCQkJfQoJCQl9KQoJfQogCgljb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHJlbW92ZVVwY29taW5nVmlkZW9zKQoJb2JzZXJ2ZXIub2JzZXJ2ZSgKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFnZS1tYW5hZ2VyJykKCQksIHsgY2hpbGRMaXN0OnRydWUsIHN1YnRyZWU6dHJ1ZSB9CgkpCgp9KSgpCg=="
        },
        {
            "name": "YouTube: Hide UPCOMING Videos",
            "options":
            {
                "check_for_updates": true,
                "user_modified": null,
                "comment": null,
                "compatopts_for_requires": true,
                "compat_wrappedjsobject": false,
                "compat_metadata": false,
                "compat_foreach": false,
                "compat_powerful_this": null,
                "sandbox": null,
                "noframes": null,
                "unwrap": null,
                "run_at": null,
                "tab_types": null,
                "override":
                {
                    "use_includes":
                    [],
                    "orig_includes":
                    [],
                    "merge_includes": true,
                    "use_matches":
                    [],
                    "orig_matches":
                    [
                        "https://youtube.com/*",
                        "https://*.youtube.com/*"
                    ],
                    "merge_matches": true,
                    "use_excludes":
                    [],
                    "orig_excludes":
                    [],
                    "merge_excludes": true,
                    "use_connects":
                    [],
                    "orig_connects":
                    [],
                    "merge_connects": true,
                    "use_blockers":
                    [],
                    "orig_run_at": "document-idle",
                    "orig_noframes": true
                }
            },
            "storage":
            {
                "ts": 1717340259739,
                "data":
                {}
            },
            "enabled": true,
            "position": 3,
            "file_url": "https://source.garden/scripts/yt-hide-upcoming/raw/branch/latest/script.user.js",
            "uuid": "65a91564-169a-4350-b82b-0d2e705f8794",
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUJCVlvdVR1YmU6IEhpZGUgVVBDT01JTkcgVmlkZW9zCi8vIEBuYW1lc3BhY2UJaHR0cHM6Ly9zb3VyY2UuZ2FyZGVuCi8vIEB2ZXJzaW9uCQkxLjEKLy8gQGxpY2Vuc2UJCUNDMAovLyBAZGVzY3JpcHRpb24JSGlkZSBVUENPTUlORyB2aWRlb3Mgb24gWW91VHViZSdzIHBhZ2VzCi8vIEBhdXRob3IJCUR5bSBTb2hpbiA8cmVAZHltLnNoPgovLyBAbWF0Y2gJCWh0dHBzOi8veW91dHViZS5jb20vKgovLyBAbWF0Y2gJCWh0dHBzOi8vKi55b3V0dWJlLmNvbS8qCi8vIEBub2ZyYW1lcwovLyBAZG93bmxvYWRVUkwJaHR0cHM6Ly9zb3VyY2UuZ2FyZGVuL3NjcmlwdHMveXQtaGlkZS11cGNvbWluZy9yYXcvYnJhbmNoL2xhdGVzdC9zY3JpcHQudXNlci5qcwovLyBAdXBkYXRlVVJMCWh0dHBzOi8vc291cmNlLmdhcmRlbi9zY3JpcHRzL3l0LWhpZGUtdXBjb21pbmcvcmF3L2JyYW5jaC9sYXRlc3Qvc2NyaXB0Lm1ldGEuanMKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CgkndXNlIHN0cmljdCcKCglmdW5jdGlvbiByZW1vdmVVcGNvbWluZ1ZpZGVvcygpewoJCWRvY3VtZW50CgkJCS5xdWVyeVNlbGVjdG9yQWxsKCBgeXRkLWl0ZW0tc2VjdGlvbi1yZW5kZXJlcmAgKQoJCQkuZm9yRWFjaCggZSA9PgoJCQl7CgkJCQljb25zdCBpc191cGNvbWluZyA9IGUucXVlcnlTZWxlY3RvciggYGJhZGdlLXNoYXBlW2FyaWEtbGFiZWw9IlVwY29taW5nIl1gICkKCQkJCWlmKCBpc191cGNvbWluZyApCgkJCQl7CgkJCQkJZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnCgkJCQl9CgkJCX0pCgl9CgoJY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihyZW1vdmVVcGNvbWluZ1ZpZGVvcykKCW9ic2VydmVyLm9ic2VydmUoCgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2UtbWFuYWdlcicpCgkJLCB7IGNoaWxkTGlzdDp0cnVlLCBzdWJ0cmVlOnRydWUgfQoJKQoKfSkoKQo="
        },
        {
            "name": "YouTube: Hide LIVE Videos",
            "options":
            {
                "check_for_updates": true,
                "user_modified": null,
                "comment": null,
                "compatopts_for_requires": true,
                "compat_wrappedjsobject": false,
                "compat_metadata": false,
                "compat_foreach": false,
                "compat_powerful_this": null,
                "sandbox": null,
                "noframes": null,
                "unwrap": null,
                "run_at": null,
                "tab_types": null,
                "override":
                {
                    "use_includes":
                    [],
                    "orig_includes":
                    [],
                    "merge_includes": true,
                    "use_matches":
                    [],
                    "orig_matches":
                    [
                        "https://youtube.com/*",
                        "https://*.youtube.com/*"
                    ],
                    "merge_matches": true,
                    "use_excludes":
                    [],
                    "orig_excludes":
                    [],
                    "merge_excludes": true,
                    "use_connects":
                    [],
                    "orig_connects":
                    [],
                    "merge_connects": true,
                    "use_blockers":
                    [],
                    "orig_run_at": "document-idle",
                    "orig_noframes": true
                }
            },
            "storage":
            {
                "ts": 1717340433941,
                "data":
                {}
            },
            "enabled": true,
            "position": 4,
            "file_url": "https://https://source.garden/scripts/yt-hide-live/raw/branch/latest/script.user.js",
            "uuid": "e9c55f4e-a9f1-41f0-87e1-63a94d7e3cd2",
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUJCVlvdVR1YmU6IEhpZGUgTElWRSBWaWRlb3MKLy8gQHZlcnNpb24JCTEuMwovLyBAbGljZW5zZQlDQzAKLy8gQGRlc2NyaXB0aW9uCUhpZGUgTElWRSB2aWRlb3Mgb24gWW91VHViZSdzIHBhZ2VzCi8vIEBhdXRob3IJCVdpbSBHb2RkZW4gPHdpbUB3aW1nb2RkZW4uYmU+Ci8vIEBhdXRob3IJCUR5bSBTb2hpbiA8cmVAZHltLnNoPgovLyBAbWF0Y2gJCWh0dHBzOi8veW91dHViZS5jb20vKgovLyBAbWF0Y2gJCWh0dHBzOi8vKi55b3V0dWJlLmNvbS8qCi8vIEBncmFudAkJbm9uZQovLyBAbmFtZXNwYWNlCWh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvdXNlcnMvNDg4ODYKLy8gQG5hbWVzcGFjZQlodHRwczovL3NvdXJjZS5nYXJkZW4KLy8gQG5vZnJhbWVzCi8vIEBkb3dubG9hZFVSTAlodHRwczovL2h0dHBzOi8vc291cmNlLmdhcmRlbi9zY3JpcHRzL3l0LWhpZGUtbGl2ZS9yYXcvYnJhbmNoL2xhdGVzdC9zY3JpcHQudXNlci5qcwovLyBAdXBkYXRlVVJMCWh0dHBzOi8vaHR0cHM6Ly9zb3VyY2UuZ2FyZGVuL3NjcmlwdHMveXQtaGlkZS1saXZlL3Jhdy9icmFuY2gvbGF0ZXN0L3NjcmlwdC5tZXRhLmpzCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewoJJ3VzZSBzdHJpY3QnCgoJZnVuY3Rpb24gcmVtb3ZlTGl2ZVZpZGVvcygpewoJCWRvY3VtZW50CgkJCS5xdWVyeVNlbGVjdG9yQWxsKCBgeXRkLWl0ZW0tc2VjdGlvbi1yZW5kZXJlcmAgKQoJCQkuZm9yRWFjaCggZSA9PgoJCQl7CgkJCQljb25zdCBpc19saXZlID0gZS5xdWVyeVNlbGVjdG9yKCBgLmJhZGdlLXN0eWxlLXR5cGUtbGl2ZS1ub3ctYWx0ZXJuYXRlYCApCgkJCQlpZiggaXNfbGl2ZSApCgkJCQl7CgkJCQkJZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnCgkJCQl9CgkJCX0pCgl9CgoJY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihyZW1vdmVMaXZlVmlkZW9zKQoJb2JzZXJ2ZXIub2JzZXJ2ZSgKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGFnZS1tYW5hZ2VyJykKCQksIHsgY2hpbGRMaXN0OnRydWUsIHN1YnRyZWU6dHJ1ZSB9CgkpCgp9KSgpCg=="
        }
    ],
    "settings":
    {
        "statistics_enabled": true,
        "configMode": 100,
        "i18n": "en"
    }
}
